import{a as fe,b as xe,c as _e,g as be,j as re,s as ye,t as Pe,u as Se}from"./chunk-HVUHN3T4.js";import{a as Ce}from"./chunk-AC5X3TU3.js";import{$ as ce,A as se,B as u,C as g,D as W,Da as U,E as $,Ea as ge,Fa as k,G as q,Ka as D,M as s,N as A,Sa as ve,T as h,V as p,X as I,Y as a,Z as r,Za as he,_ as y,aa as le,ba as w,ca as v,da as d,ea as pe,fa as de,ga as me,ia as l,ja as x,ka as F,la as ue,ma as B,na as G,oa as H,qa as E,s as ae,x as M}from"./chunk-4UTGUK5Q.js";var L=class o{calculateDelta(t,e){let i=e-t,n=t===0?e>0?100:0:i/t*100,c;return Math.abs(n)<.5?c="stable":i>0?c="up":c="down",{absolute:Number(i.toFixed(2)),percentage:Number(n.toFixed(1)),trend:c}}compareStats(t,e){return{period1Stats:t,period2Stats:e,deltas:{totalDistance:this.calculateDelta(t.totalDistance,e.totalDistance),averageDistance:this.calculateDelta(t.averageDistance,e.averageDistance),averageSpeed:this.calculateDelta(t.averageSpeed,e.averageSpeed),totalElevation:this.calculateDelta(t.totalElevation,e.totalElevation),averageElevation:this.calculateDelta(t.averageElevation,e.averageElevation),totalElapsedTime:this.calculateDelta(t.totalElapsedTime,e.totalElapsedTime),numberOfActivities:this.calculateDelta(t.numberOfActivities,e.numberOfActivities)}}}getComparisonPresets(){let t=new Date,e=[],i=this.getStartOfWeek(t),n=new Date(t),c=new Date(i);c.setDate(c.getDate()-7);let m=new Date(i);m.setSeconds(m.getSeconds()-1),e.push({label:"Semaine actuelle vs Semaine pr\xE9c\xE9dente",period1:{type:"custom",label:"Semaine pr\xE9c\xE9dente",startDate:c,endDate:m},period2:{type:"custom",label:"Semaine actuelle",startDate:i,endDate:n}});let C=new Date(t.getFullYear(),t.getMonth(),1),P=new Date(t),T=new Date(t.getFullYear(),t.getMonth()-1,1),b=new Date(t.getFullYear(),t.getMonth(),0,23,59,59);e.push({label:"Mois actuel vs Mois pr\xE9c\xE9dent",period1:{type:"custom",label:"Mois pr\xE9c\xE9dent",startDate:T,endDate:b},period2:{type:"custom",label:"Mois actuel",startDate:C,endDate:P}});let Y=new Date(t);Y.setDate(Y.getDate()-30);let ne=new Date(t),V=new Date(t);V.setDate(V.getDate()-60);let O=new Date(t);O.setDate(O.getDate()-30),O.setSeconds(O.getSeconds()-1),e.push({label:"30 derniers jours vs 30 jours pr\xE9c\xE9dents",period1:{type:"custom",label:"30 jours pr\xE9c\xE9dents",startDate:V,endDate:O},period2:{type:"custom",label:"30 derniers jours",startDate:Y,endDate:ne}});let R=new Date(t.getFullYear(),0,1),j=new Date(t),N=new Date(t.getFullYear()-1,0,1),_=new Date(t.getFullYear()-1,t.getMonth(),t.getDate(),23,59,59);e.push({label:"Cette ann\xE9e vs Ann\xE9e pr\xE9c\xE9dente",period1:{type:"custom",label:`Ann\xE9e ${t.getFullYear()-1}`,startDate:N,endDate:_},period2:{type:"custom",label:`Ann\xE9e ${t.getFullYear()}`,startDate:R,endDate:j}});let f=new Date(t.getFullYear(),t.getMonth(),1),S=new Date(t),z=new Date(t.getFullYear()-1,t.getMonth(),1),oe=new Date(t.getFullYear()-1,t.getMonth(),t.getDate(),23,59,59),Z=t.toLocaleDateString("fr-FR",{month:"long"});return e.push({label:`${Z} ${t.getFullYear()} vs ${Z} ${t.getFullYear()-1}`,period1:{type:"custom",label:`${Z} ${t.getFullYear()-1}`,startDate:z,endDate:oe},period2:{type:"custom",label:`${Z} ${t.getFullYear()}`,startDate:f,endDate:S}}),e}getStartOfWeek(t){let e=new Date(t),i=e.getDay(),n=e.getDate()-i+(i===0?-6:1);return new Date(e.setDate(n))}filterActivitiesByPeriod(t,e){return t.filter(i=>{let n=new Date(i.start_date);return n>=e.startDate&&n<=e.endDate})}formatPeriodLabel(t){let e=t.startDate.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}),i=t.endDate.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"});return`${e} - ${i}`}static \u0275fac=function(e){return new(e||o)};static \u0275prov=ae({token:o,factory:o.\u0275fac,providedIn:"root"})};function Ee(o,t){if(o&1){let e=w();a(0,"button",15),v("click",function(){let n=u(e).index,c=d();return g(c.onPresetSelect(n))}),l(1),r()}if(o&2){let e=t.$implicit,i=t.index,n=d();I("active",n.selectedPresetIndex===i),s(),F(" ",e.label," ")}}function ke(o,t){if(o&1){let e=w();a(0,"button",16),v("click",function(){u(e);let n=d();return n.showCustomPeriod1=!0,g(n.selectedPresetIndex=null)}),l(1," Personnaliser "),r()}}function De(o,t){if(o&1){let e=w();a(0,"div",17)(1,"div",18)(2,"label"),l(3,"Date de d\xE9but"),r(),a(4,"input",19),H("ngModelChange",function(n){u(e);let c=d();return G(c.customPeriod1Start,n)||(c.customPeriod1Start=n),g(n)}),v("change",function(){u(e);let n=d();return g(n.applyCustomPeriod1())}),r()(),a(5,"div",18)(6,"label"),l(7,"Date de fin"),r(),a(8,"input",19),H("ngModelChange",function(n){u(e);let c=d();return G(c.customPeriod1End,n)||(c.customPeriod1End=n),g(n)}),v("change",function(){u(e);let n=d();return g(n.applyCustomPeriod1())}),r()()()}if(o&2){let e=d();s(4),B("ngModel",e.customPeriod1Start),s(4),B("ngModel",e.customPeriod1End)}}function Oe(o,t){if(o&1){let e=w();a(0,"button",16),v("click",function(){u(e);let n=d();return n.showCustomPeriod2=!0,g(n.selectedPresetIndex=null)}),l(1," Personnaliser "),r()}}function Te(o,t){if(o&1){let e=w();a(0,"div",17)(1,"div",18)(2,"label"),l(3,"Date de d\xE9but"),r(),a(4,"input",19),H("ngModelChange",function(n){u(e);let c=d();return G(c.customPeriod2Start,n)||(c.customPeriod2Start=n),g(n)}),v("change",function(){u(e);let n=d();return g(n.applyCustomPeriod2())}),r()(),a(5,"div",18)(6,"label"),l(7,"Date de fin"),r(),a(8,"input",19),H("ngModelChange",function(n){u(e);let c=d();return G(c.customPeriod2End,n)||(c.customPeriod2End=n),g(n)}),v("change",function(){u(e);let n=d();return g(n.applyCustomPeriod2())}),r()()()}if(o&2){let e=d();s(4),B("ngModel",e.customPeriod2Start),s(4),B("ngModel",e.customPeriod2End)}}var K=class o{constructor(t){this.comparisonService=t;this.presets=this.comparisonService.getComparisonPresets()}period1=null;period2=null;period1Change=new q;period2Change=new q;compareClick=new q;presets=[];selectedPresetIndex=null;showCustomPeriod1=!1;showCustomPeriod2=!1;customPeriod1Start="";customPeriod1End="";customPeriod2Start="";customPeriod2End="";onPresetSelect(t){this.selectedPresetIndex=t;let e=this.presets[t];this.period1=e.period1,this.period2=e.period2,this.showCustomPeriod1=!1,this.showCustomPeriod2=!1,this.period1Change.emit(this.period1),this.period2Change.emit(this.period2)}onCustomMode(){this.selectedPresetIndex=null,this.showCustomPeriod1=!0,this.showCustomPeriod2=!0}applyCustomPeriod1(){if(this.customPeriod1Start&&this.customPeriod1End){let t=new Date(this.customPeriod1Start),e=new Date(this.customPeriod1End);e.setHours(23,59,59,999),this.period1={type:"custom",label:"P\xE9riode personnalis\xE9e 1",startDate:t,endDate:e},this.period1Change.emit(this.period1)}}applyCustomPeriod2(){if(this.customPeriod2Start&&this.customPeriod2End){let t=new Date(this.customPeriod2Start),e=new Date(this.customPeriod2End);e.setHours(23,59,59,999),this.period2={type:"custom",label:"P\xE9riode personnalis\xE9e 2",startDate:t,endDate:e},this.period2Change.emit(this.period2)}}onCompare(){this.period1&&this.period2&&this.compareClick.emit()}canCompare(){return!!(this.period1&&this.period2)}formatPeriod(t){return t?this.comparisonService.formatPeriodLabel(t):"S\xE9lectionnez une p\xE9riode"}static \u0275fac=function(e){return new(e||o)(A(L))};static \u0275cmp=M({type:o,selectors:[["app-comparison-period-selector"]],inputs:{period1:"period1",period2:"period2"},outputs:{period1Change:"period1Change",period2Change:"period2Change",compareClick:"compareClick"},standalone:!0,features:[E],decls:32,vars:10,consts:[[1,"comparison-selector-container"],[1,"selector-title"],[1,"presets-section"],[1,"presets-grid"],["class","preset-button",3,"active","click",4,"ngFor","ngForOf"],[1,"preset-button","custom",3,"click"],[1,"periods-comparison"],[1,"period-selector"],[1,"period-display"],[1,"period-label"],["class","custom-toggle",3,"click",4,"ngIf"],["class","custom-inputs",4,"ngIf"],[1,"vs-separator"],[1,"compare-action"],[1,"compare-button",3,"click","disabled"],[1,"preset-button",3,"click"],[1,"custom-toggle",3,"click"],[1,"custom-inputs"],[1,"date-input-group"],["type","date",1,"date-input",3,"ngModelChange","change","ngModel"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"h2",1),l(2,"Comparer les p\xE9riodes"),r(),a(3,"div",2)(4,"h3"),l(5,"Suggestions"),r(),a(6,"div",3),h(7,Ee,2,3,"button",4),a(8,"button",5),v("click",function(){return i.onCustomMode()}),l(9," Personnalis\xE9 "),r()()(),a(10,"div",6)(11,"div",7)(12,"h3"),l(13,"P\xE9riode 1"),r(),a(14,"div",8)(15,"div",9),l(16),r(),h(17,ke,2,0,"button",10),r(),h(18,De,9,2,"div",11),r(),a(19,"div",12),l(20,"VS"),r(),a(21,"div",7)(22,"h3"),l(23,"P\xE9riode 2"),r(),a(24,"div",8)(25,"div",9),l(26),r(),h(27,Oe,2,0,"button",10),r(),h(28,Te,9,2,"div",11),r()(),a(29,"div",13)(30,"button",14),v("click",function(){return i.onCompare()}),l(31," Comparer les p\xE9riodes "),r()()()),e&2&&(s(7),p("ngForOf",i.presets),s(),I("active",i.selectedPresetIndex===null&&(i.showCustomPeriod1||i.showCustomPeriod2)),s(8),x(i.formatPeriod(i.period1)),s(),p("ngIf",!i.showCustomPeriod1),s(),p("ngIf",i.showCustomPeriod1),s(8),x(i.formatPeriod(i.period2)),s(),p("ngIf",!i.showCustomPeriod2),s(),p("ngIf",i.showCustomPeriod2),s(2),p("disabled",!i.canCompare()))},dependencies:[D,ge,k,be,fe,xe,_e],styles:[".comparison-selector-container[_ngcontent-%COMP%]{background:var(--card-background);border-radius:12px;padding:24px;margin-bottom:24px;box-shadow:0 2px 8px #0000001a}.selector-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin:0 0 24px;color:var(--text-primary)}.presets-section[_ngcontent-%COMP%]{margin-bottom:32px}.presets-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin:0 0 12px;color:var(--text-secondary)}.presets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:12px}.preset-button[_ngcontent-%COMP%]{padding:12px 16px;background:var(--background);border:2px solid var(--border-color);border-radius:8px;font-size:14px;font-weight:500;color:var(--text-primary);cursor:pointer;transition:all .2s ease}.preset-button[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);background:var(--hover-background)}.preset-button.active[_ngcontent-%COMP%]{background:#fc4c02;border-color:#fc4c02;color:#fff}.preset-button.custom[_ngcontent-%COMP%]{border-style:dashed}.periods-comparison[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr;gap:24px;align-items:start;margin-bottom:24px}.period-selector[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:0 0 12px;color:var(--text-primary)}.period-display[_ngcontent-%COMP%]{background:var(--background);border:1px solid var(--border-color);border-radius:8px;padding:16px;margin-bottom:12px}.period-label[_ngcontent-%COMP%]{font-size:14px;color:var(--text-primary);font-weight:500;margin-bottom:8px}.custom-toggle[_ngcontent-%COMP%]{background:none;border:none;color:var(--primary-color);font-size:13px;font-weight:500;cursor:pointer;padding:4px 0;text-decoration:underline}.custom-toggle[_ngcontent-%COMP%]:hover{color:var(--primary-hover)}.vs-separator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:700;color:var(--text-secondary);padding-top:32px}.custom-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.date-input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.date-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:var(--text-secondary)}.date-input[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid var(--border-color);border-radius:6px;background:var(--background);color:var(--text-primary);font-size:14px;font-family:inherit}.date-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.compare-action[_ngcontent-%COMP%]{display:flex;justify-content:center}.compare-button[_ngcontent-%COMP%]{padding:14px 32px;background:#fc4c02;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 8px #fc4c0233}.compare-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#e04402;transform:translateY(-1px);box-shadow:0 4px 12px #fc4c0266}.compare-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background:#999}@media (max-width: 768px){.periods-comparison[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.vs-separator[_ngcontent-%COMP%]{padding:0;transform:rotate(90deg)}.presets-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function Ae(o,t){if(o&1&&(a(0,"span",10),l(1),r()),o&2){let e=d();s(),x(e.unit)}}function Ie(o,t){if(o&1&&(a(0,"span",10),l(1),r()),o&2){let e=d();s(),x(e.unit)}}function Ve(o,t){if(o&1&&(a(0,"div",11)(1,"div",12),l(2),a(3,"span",13),l(4),r()(),a(5,"div",14),l(6),r()()),o&2){let e=d();p("ngClass",e.trendClass),s(2),F(" ",e.formattedDelta," "),s(2),x(e.trendIcon),s(2),x(e.formattedPercentage)}}function ze(o,t){o&1&&(a(0,"div",15)(1,"span"),l(2,"\u2014"),r()())}var ee=class o{title="";value1=0;value2=0;unit="";isTime=!1;delta=null;get formattedValue1(){return this.isTime?this.formatTime(this.value1):this.value1.toFixed(1)}get formattedValue2(){return this.isTime?this.formatTime(this.value2):this.value2.toFixed(1)}get formattedDelta(){if(!this.delta)return"";if(this.isTime){let e=Math.floor(Math.abs(this.delta.absolute)/3600),i=Math.floor(Math.abs(this.delta.absolute)%3600/60),n=this.delta.absolute>=0?"+":"-";return e>0?`${n}${e}h${i}min`:`${n}${i}min`}return`${this.delta.absolute>=0?"+":""}${this.delta.absolute} ${this.unit}`}get formattedPercentage(){return this.delta?`${this.delta.percentage>=0?"+":""}${this.delta.percentage}%`:""}get trendIcon(){if(!this.delta)return"";switch(this.delta.trend){case"up":return"\u2191";case"down":return"\u2193";case"stable":return"\u2192";default:return""}}get trendClass(){return this.delta?this.delta.trend:""}formatTime(t){let e=Math.floor(t/3600),i=Math.floor(t%3600/60);return e>0?`${e}h${i}min`:`${i}min`}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-comparison-stats-card"]],inputs:{title:"title",value1:"value1",value2:"value2",unit:"unit",isTime:"isTime",delta:"delta"},standalone:!0,features:[E],decls:16,vars:7,consts:[[1,"comparison-card"],[1,"card-title"],[1,"values-container"],[1,"value","period1"],[1,"value-number"],["class","value-unit",4,"ngIf"],[1,"arrow"],[1,"value","period2"],["class","delta-container",3,"ngClass",4,"ngIf"],["class","no-delta",4,"ngIf"],[1,"value-unit"],[1,"delta-container",3,"ngClass"],[1,"delta-value"],[1,"trend-icon"],[1,"delta-percentage"],[1,"no-delta"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1),l(2),r(),a(3,"div",2)(4,"div",3)(5,"span",4),l(6),r(),h(7,Ae,2,1,"span",5),r(),a(8,"div",6),l(9,"\u2192"),r(),a(10,"div",7)(11,"span",4),l(12),r(),h(13,Ie,2,1,"span",5),r()(),h(14,Ve,7,4,"div",8)(15,ze,3,0,"div",9),r()),e&2&&(s(2),x(i.title),s(4),x(i.formattedValue1),s(),p("ngIf",!i.isTime),s(5),x(i.formattedValue2),s(),p("ngIf",!i.isTime),s(),p("ngIf",i.delta),s(),p("ngIf",!i.delta))},dependencies:[D,U,k],styles:[".comparison-card[_ngcontent-%COMP%]{background:var(--card-background);border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000001a;transition:all .3s ease;min-height:180px;display:flex;flex-direction:column;justify-content:space-between}.comparison-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #00000026}.card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--text-secondary);margin-bottom:16px;text-transform:uppercase;letter-spacing:.5px}.values-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;gap:12px}.value[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1}.value-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:var(--text-primary);line-height:1.1}.value-unit[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary);margin-top:4px}.period1[_ngcontent-%COMP%]   .value-number[_ngcontent-%COMP%]{color:var(--text-secondary)}.period2[_ngcontent-%COMP%]   .value-number[_ngcontent-%COMP%]{color:var(--primary-color)}.arrow[_ngcontent-%COMP%]{font-size:24px;color:var(--text-secondary);opacity:.5}.delta-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;padding:12px;background:var(--background);border-radius:8px;border:2px solid var(--border-color)}.delta-container.up[_ngcontent-%COMP%]{border-color:var(--success-color, #22c55e);background:var(--success-background, rgba(34, 197, 94, .1))}.delta-container.down[_ngcontent-%COMP%]{border-color:var(--danger-color, #ef4444);background:var(--danger-background, rgba(239, 68, 68, .1))}.delta-container.stable[_ngcontent-%COMP%]{border-color:var(--text-secondary);background:var(--background)}.delta-value[_ngcontent-%COMP%]{font-size:18px;font-weight:600;display:flex;align-items:center;gap:6px}.delta-container.up[_ngcontent-%COMP%]   .delta-value[_ngcontent-%COMP%]{color:var(--success-color, #22c55e)}.delta-container.down[_ngcontent-%COMP%]   .delta-value[_ngcontent-%COMP%]{color:var(--danger-color, #ef4444)}.delta-container.stable[_ngcontent-%COMP%]   .delta-value[_ngcontent-%COMP%]{color:var(--text-secondary)}.trend-icon[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.delta-percentage[_ngcontent-%COMP%]{font-size:14px;font-weight:500;opacity:.9}.delta-container.up[_ngcontent-%COMP%]   .delta-percentage[_ngcontent-%COMP%]{color:var(--success-color, #22c55e)}.delta-container.down[_ngcontent-%COMP%]   .delta-percentage[_ngcontent-%COMP%]{color:var(--danger-color, #ef4444)}.delta-container.stable[_ngcontent-%COMP%]   .delta-percentage[_ngcontent-%COMP%]{color:var(--text-secondary)}.no-delta[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:12px;color:var(--text-secondary);font-size:24px;opacity:.3}@media (max-width: 480px){.value-number[_ngcontent-%COMP%]{font-size:24px}.card-title[_ngcontent-%COMP%]{font-size:12px}.delta-value[_ngcontent-%COMP%]{font-size:14px}}"]})};function Fe(o,t){if(o&1&&(a(0,"div",2)(1,"div",3)(2,"div",4),y(3,"i",5),r(),a(4,"h2",6),l(5),r(),a(6,"span",7),l(7),r()(),a(8,"div",8),y(9,"app-comparison-stats-card",9)(10,"app-comparison-stats-card",10)(11,"app-comparison-stats-card",11)(12,"app-comparison-stats-card",12)(13,"app-comparison-stats-card",13)(14,"app-comparison-stats-card",14),r()()),o&2){let e=d();s(2),p("ngClass",e.activityIcon),s(3),x(e.activityType),s(2),ue(" ",e.comparison.period1Stats.numberOfActivities," activit\xE9(s) \u2192 ",e.comparison.period2Stats.numberOfActivities," activit\xE9(s) "),s(2),p("value1",e.comparison.period1Stats.totalDistance)("value2",e.comparison.period2Stats.totalDistance)("delta",e.comparison.deltas.totalDistance),s(),p("value1",e.comparison.period1Stats.averageDistance)("value2",e.comparison.period2Stats.averageDistance)("delta",e.comparison.deltas.averageDistance),s(),p("value1",e.comparison.period1Stats.averageSpeed)("value2",e.comparison.period2Stats.averageSpeed)("delta",e.comparison.deltas.averageSpeed),s(),p("value1",e.comparison.period1Stats.totalElevation)("value2",e.comparison.period2Stats.totalElevation)("delta",e.comparison.deltas.totalElevation),s(),p("value1",e.comparison.period1Stats.averageElevation)("value2",e.comparison.period2Stats.averageElevation)("delta",e.comparison.deltas.averageElevation),s(),p("value1",e.comparison.period1Stats.totalElapsedTime)("value2",e.comparison.period2Stats.totalElapsedTime)("delta",e.comparison.deltas.totalElapsedTime)("isTime",!0)}}function Le(o,t){o&1&&(a(0,"div",15)(1,"p"),l(2,"Aucune donn\xE9e disponible pour cette comparaison."),r()())}var te=class o{comparison=null;activityType="";get activityIcon(){switch(this.activityType.toLowerCase()){case"run":return"run";case"walk":return"walk";case"bike":return"bike";default:return""}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-comparison-stats-grid"]],inputs:{comparison:"comparison",activityType:"activityType"},standalone:!0,features:[E],decls:2,vars:2,consts:[["class","stats-grid-container",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"stats-grid-container"],[1,"activity-header"],[1,"activity-icon",3,"ngClass"],[1,"icon"],[1,"activity-title"],[1,"activity-count"],[1,"comparison-grid"],["title","Distance totale","unit","km",3,"value1","value2","delta"],["title","Distance moyenne/sortie","unit","km",3,"value1","value2","delta"],["title","Vitesse moyenne","unit","km/h",3,"value1","value2","delta"],["title","D\xE9nivel\xE9 total","unit","m",3,"value1","value2","delta"],["title","D\xE9nivel\xE9 moyen/sortie","unit","m",3,"value1","value2","delta"],["title","Temps total",3,"value1","value2","delta","isTime"],[1,"no-data"]],template:function(e,i){e&1&&h(0,Fe,15,23,"div",0)(1,Le,3,0,"div",1),e&2&&(p("ngIf",i.comparison),s(),p("ngIf",!i.comparison))},dependencies:[D,U,k,ee],styles:[`.stats-grid-container[_ngcontent-%COMP%]{background:var(--card-background);border-radius:12px;padding:24px;margin-bottom:24px;box-shadow:0 2px 8px #0000001a}.activity-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--border-color)}.activity-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.activity-icon.run[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fc4c02,#ff6b35)}.activity-icon.walk[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#34d399)}.activity-icon.bike[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#60a5fa)}.activity-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:24px;height:24px;background:#fff;mask-size:contain;mask-repeat:no-repeat;mask-position:center}.activity-icon.run[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor'%3E%3Cpath d='M13 2L3 14h9l-1 8 10-12h-9l1-8z'/%3E%3C/svg%3E")}.activity-icon.walk[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor'%3E%3Ccircle cx='12' cy='4' r='2'/%3E%3Cpath d='M10 8v6M14 8v6M10 14l-2 6M14 14l2 6'/%3E%3C/svg%3E")}.activity-icon.bike[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor'%3E%3Ccircle cx='18' cy='18' r='3'/%3E%3Ccircle cx='6' cy='18' r='3'/%3E%3Cpath d='M12 6l-2 4h6l-2-4M8 14l4-4 4 4'/%3E%3C/svg%3E")}.activity-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:var(--text-primary);margin:0}.activity-count[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary);margin-left:auto}.comparison-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:20px}.no-data[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:48px;background:var(--card-background);border-radius:12px;margin-bottom:24px}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}@media (max-width: 768px){.comparison-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.activity-header[_ngcontent-%COMP%]{flex-wrap:wrap}.activity-count[_ngcontent-%COMP%]{margin-left:0;width:100%;text-align:left}}`]})};var Ye=["chartCanvas"];function Re(o,t){o&1&&(a(0,"span"),l(1,"\u{1F4A1} Astuce : Maintenez Ctrl + Molette pour zoomer, cliquez-glissez pour naviguer"),r())}function je(o,t){o&1&&(a(0,"span"),l(1,"\u{1F4A1} Astuce : Pincez pour zoomer, glissez pour naviguer"),r())}function Ne(o,t){o&1&&(a(0,"span",19),l(1,"\u2022 Distance cumul\xE9e affich\xE9e"),r())}function We(o,t){o&1&&(a(0,"span",19),l(1,"\u2022 Vitesse moyenne pond\xE9r\xE9e par distance"),r())}function $e(o,t){o&1&&(a(0,"span",19),l(1,"\u2022 D\xE9nivel\xE9 cumul\xE9 affich\xE9"),r())}re.register(...ye,Pe);var ie=class o{chartCanvas;activities1=[];activities2=[];period1=null;period2=null;activityType="Run";selectedMetric="distance";chart=null;isMobile=this.detectMobileDevice();ngOnChanges(t){(t.activities1||t.activities2)&&this.activities1.length&&this.activities2.length&&setTimeout(()=>this.createChart(),0)}selectMetric(t){this.selectedMetric=t,this.createChart()}createChart(){if(this.chart&&this.chart.destroy(),!this.chartCanvas?.nativeElement)return;let t=this.chartCanvas.nativeElement.getContext("2d");if(!t)return;let e=this.prepareAlignedChartData(this.activities1,this.activities2,this.period1,this.period2),i={type:"line",data:{labels:e.labels,datasets:[{label:this.period1?.label||"P\xE9riode 1",data:e.data1,borderColor:"rgba(156, 163, 175, 0.8)",backgroundColor:"rgba(156, 163, 175, 0.1)",borderWidth:2,tension:.4,pointRadius:3,pointHoverRadius:5,fill:!0,spanGaps:!0},{label:this.period2?.label||"P\xE9riode 2",data:e.data2,borderColor:"rgba(252, 76, 2, 0.8)",backgroundColor:"rgba(252, 76, 2, 0.1)",borderWidth:2,tension:.4,pointRadius:3,pointHoverRadius:5,fill:!0,spanGaps:!0}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{color:getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim(),font:{size:12,weight:500},padding:16,usePointStyle:!0,pointStyle:"circle"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},cornerRadius:8,displayColors:!0,callbacks:{title:n=>n[0].label,label:n=>{let c=n.dataset.label||"";c&&(c+=": ");let m=n.parsed.y;return m===null?c+="Pas de donn\xE9es":c+=this.formatValue(m),c},afterLabel:n=>{let c=n.dataIndex,C=n.datasetIndex===0?this.activities1:this.activities2;return C[c]?`Date: ${new Date(C[c].start_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}`:""}}},zoom:{zoom:{wheel:{enabled:!0,modifierKey:"ctrl"},pinch:{enabled:!0},mode:"x"},pan:{enabled:!0,mode:"x"}}},scales:{x:{grid:{color:"rgba(156, 163, 175, 0.1)"},ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--text-secondary").trim(),font:{size:11},maxRotation:45,minRotation:45,autoSkip:!0,autoSkipPadding:15,maxTicksLimit:20}},y:{beginAtZero:!0,grid:{color:"rgba(156, 163, 175, 0.1)"},ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--text-secondary").trim(),font:{size:11},callback:n=>this.formatValue(Number(n))}}}}};this.chart=new re(t,i)}prepareAlignedChartData(t,e,i,n){if(!i||!n)return{labels:[],data1:[],data2:[]};let c=[...t].sort((_,f)=>new Date(_.start_date).getTime()-new Date(f.start_date).getTime()),m=[...e].sort((_,f)=>new Date(_.start_date).getTime()-new Date(f.start_date).getTime()),C=this.calculateCumulativeValues(c),P=this.calculateCumulativeValues(m),T=new Map,b=new Map;c.forEach((_,f)=>{let S=new Date(_.start_date),z=this.getDayOfYear(S);T.set(z,{date:S,value:C[f]})}),m.forEach((_,f)=>{let S=new Date(_.start_date),z=this.getDayOfYear(S);b.set(z,{date:S,value:P[f]})});let Y=new Set([...T.keys(),...b.keys()]),ne=Array.from(Y).sort((_,f)=>_-f),V=[],O=[],R=[],j=0,N=0;return ne.forEach(_=>{let f=T.get(_),S=b.get(_),oe=(f?.date||S?.date||new Date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"});V.push(oe),f&&(j=f.value),O.push(j),S&&(N=S.value),R.push(N)}),{labels:V,data1:O,data2:R}}getDayOfYear(t){let e=new Date(t.getFullYear(),0,0),i=t.getTime()-e.getTime(),n=1e3*60*60*24;return Math.floor(i/n)}calculateCumulativeValues(t){let e=[],i=0;return t.forEach(n=>{switch(this.selectedMetric){case"distance":i+=n.distance;break;case"speed":let c=t.slice(0,t.indexOf(n)+1).reduce((C,P)=>C+P.distance,0),m=t.slice(0,t.indexOf(n)+1).reduce((C,P)=>C+P.average_speed*P.distance,0);i=c>0?m/c:0;break;case"elevation":i+=n.total_elevation_gain;break}e.push(i)}),e}prepareChartData(t,e){let i=[...t].sort((m,C)=>new Date(m.start_date).getTime()-new Date(C.start_date).getTime());if(!e)return{labels:[],values:[]};let n=i.map(m=>new Date(m.start_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"})),c=[];switch(this.selectedMetric){case"distance":let m=0;c=i.map(b=>(m+=b.distance,m));break;case"speed":let C=0,P=0;c=i.map(b=>(C+=b.distance,P+=b.average_speed*b.distance,C>0?P/C:0));break;case"elevation":let T=0;c=i.map(b=>(T+=b.total_elevation_gain,T));break;default:c=i.map(()=>0)}return{labels:n,values:c}}formatValue(t){switch(this.selectedMetric){case"distance":return`${t.toFixed(1)} km`;case"speed":return`${t.toFixed(1)} km/h`;case"elevation":return`${t.toFixed(0)} m`;default:return t.toString()}}resetZoom(){this.chart&&this.chart.resetZoom()}detectMobileDevice(){let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),e=window.innerWidth<=768;return t||e}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-comparison-chart"]],viewQuery:function(e,i){if(e&1&&pe(Ye,5),e&2){let n;de(n=me())&&(i.chartCanvas=n.first)}},inputs:{activities1:"activities1",activities2:"activities2",period1:"period1",period2:"period2",activityType:"activityType"},standalone:!0,features:[se,E],decls:27,vars:12,consts:[["chartCanvas",""],[1,"chart-container"],[1,"chart-header"],[1,"chart-title"],[1,"chart-controls"],[1,"metric-selector"],["title","Distance cumul\xE9e",1,"metric-button",3,"click"],["title","Vitesse moyenne pond\xE9r\xE9e",1,"metric-button",3,"click"],["title","D\xE9nivel\xE9 cumul\xE9",1,"metric-button",3,"click"],["title","R\xE9initialiser le zoom",1,"reset-zoom-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"],["d","M21 3v5h-5"],["d","M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"],["d","M3 21v-5h5"],[1,"chart-canvas-wrapper"],[1,"chart-hint"],[4,"ngIf"],["class","metric-info",4,"ngIf"],[1,"metric-info"]],template:function(e,i){if(e&1){let n=w();a(0,"div",1)(1,"div",2)(2,"h3",3),l(3),r(),a(4,"div",4)(5,"div",5)(6,"button",6),v("click",function(){return u(n),g(i.selectMetric("distance"))}),l(7," Distance "),r(),a(8,"button",7),v("click",function(){return u(n),g(i.selectMetric("speed"))}),l(9," Vitesse "),r(),a(10,"button",8),v("click",function(){return u(n),g(i.selectMetric("elevation"))}),l(11," D\xE9nivel\xE9 "),r()(),a(12,"button",9),v("click",function(){return u(n),g(i.resetZoom())}),W(),a(13,"svg",10),y(14,"path",11)(15,"path",12)(16,"path",13)(17,"path",14),r()()()(),$(),a(18,"div",15),y(19,"canvas",null,0),r(),a(21,"div",16),h(22,Re,2,0,"span",17)(23,je,2,0,"span",17)(24,Ne,2,0,"span",18)(25,We,2,0,"span",18)(26,$e,2,0,"span",18),r()()}e&2&&(s(3),F("\xC9volution comparative - ",i.activityType,""),s(3),I("active",i.selectedMetric==="distance"),s(2),I("active",i.selectedMetric==="speed"),s(2),I("active",i.selectedMetric==="elevation"),s(12),p("ngIf",!i.isMobile),s(),p("ngIf",i.isMobile),s(),p("ngIf",i.selectedMetric==="distance"),s(),p("ngIf",i.selectedMetric==="speed"),s(),p("ngIf",i.selectedMetric==="elevation"))},dependencies:[D,k],styles:[".chart-container[_ngcontent-%COMP%]{background:var(--card-background);border-radius:12px;padding:24px;margin-bottom:24px;box-shadow:0 2px 8px #0000001a}.chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.chart-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--text-primary);margin:0}.chart-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.metric-selector[_ngcontent-%COMP%]{display:flex;gap:8px;background:var(--background);padding:4px;border-radius:8px}.metric-button[_ngcontent-%COMP%]{padding:8px 16px;background:transparent;border:none;border-radius:6px;font-size:14px;font-weight:500;color:var(--text-secondary);cursor:pointer;transition:all .2s ease}.metric-button[_ngcontent-%COMP%]:hover{background:var(--hover-background);color:var(--text-primary)}.metric-button.active[_ngcontent-%COMP%]{background:#fc4c02;color:#fff}.reset-zoom-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;background:var(--background);border:1px solid var(--border-color);border-radius:8px;color:var(--text-secondary);cursor:pointer;transition:all .2s ease}.reset-zoom-button[_ngcontent-%COMP%]:hover{background:var(--hover-background);color:var(--primary-color);border-color:var(--primary-color)}.chart-canvas-wrapper[_ngcontent-%COMP%]{position:relative;height:400px;margin-bottom:16px}canvas[_ngcontent-%COMP%]{max-width:100%;height:100%}.chart-hint[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);text-align:center;padding:8px;background:var(--background);border-radius:6px;opacity:.8;display:flex;flex-wrap:wrap;justify-content:center;gap:12px}.metric-info[_ngcontent-%COMP%]{font-weight:500;color:var(--primary-color)}@media (max-width: 768px){.chart-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.chart-controls[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.metric-selector[_ngcontent-%COMP%]{flex:1}.metric-button[_ngcontent-%COMP%]{flex:1;padding:8px 12px;font-size:13px}.chart-canvas-wrapper[_ngcontent-%COMP%]{height:300px}}"]})};function Be(o,t){o&1&&y(0,"app-spinner")}function Ge(o,t){if(o&1){let e=w();a(0,"div",8)(1,"div",9)(2,"p"),l(3,"Votre session a expir\xE9 ou n'est plus valide."),r(),a(4,"button",10),v("click",function(){u(e);let n=d(2);return g(n.reconnectToStrava())}),l(5," Se reconnecter \xE0 Strava "),r()()()}}function He(o,t){if(o&1){let e=w();a(0,"div",8)(1,"div",9)(2,"p"),l(3),r(),a(4,"button",10),v("click",function(){u(e);let n=d(2);return g(n.onCompare())}),l(5," R\xE9essayer "),r()()()}if(o&2){let e=d(2);s(3),x(e.error)}}function Qe(o,t){if(o&1&&(ce(0),h(1,Ge,6,0,"div",7)(2,He,6,1,"div",7),le()),o&2){let e=d();s(),p("ngIf",e.authError),s(),p("ngIf",e.error&&!e.authError)}}function Ze(o,t){if(o&1&&(a(0,"div"),y(1,"app-comparison-stats-grid",13)(2,"app-comparison-chart",14),r()),o&2){let e=d(2);s(),p("comparison",e.runComparison),s(),p("activities1",e.runActivities1)("activities2",e.runActivities2)("period1",e.period1)("period2",e.period2)}}function qe(o,t){if(o&1&&(a(0,"div"),y(1,"app-comparison-stats-grid",15)(2,"app-comparison-chart",16),r()),o&2){let e=d(2);s(),p("comparison",e.walkComparison),s(),p("activities1",e.walkActivities1)("activities2",e.walkActivities2)("period1",e.period1)("period2",e.period2)}}function Ue(o,t){if(o&1&&(a(0,"div"),y(1,"app-comparison-stats-grid",17)(2,"app-comparison-chart",18),r()),o&2){let e=d(2);s(),p("comparison",e.bikeComparison),s(),p("activities1",e.bikeActivities1)("activities2",e.bikeActivities2)("period1",e.period1)("period2",e.period2)}}function Ke(o,t){o&1&&(a(0,"div",19)(1,"div",20),W(),a(2,"svg",21),y(3,"circle",22)(4,"line",23)(5,"line",24),r(),$(),a(6,"h3"),l(7,"Aucune activit\xE9 trouv\xE9e"),r(),a(8,"p"),l(9,"Il n'y a pas d'activit\xE9s pour les p\xE9riodes s\xE9lectionn\xE9es."),r()()())}function Je(o,t){if(o&1&&(a(0,"div",11),h(1,Ze,3,5,"div",4)(2,qe,3,5,"div",4)(3,Ue,3,5,"div",4)(4,Ke,10,0,"div",12),r()),o&2){let e=d();s(),p("ngIf",e.hasActivities("run")),s(),p("ngIf",e.hasActivities("walk")),s(),p("ngIf",e.hasActivities("bike")),s(),p("ngIf",!e.hasActivities("run")&&!e.hasActivities("walk")&&!e.hasActivities("bike"))}}function Xe(o,t){o&1&&(a(0,"div",25)(1,"div",26),W(),a(2,"svg",27),y(3,"path",28),r(),$(),a(4,"h3"),l(5,"Pr\xEAt \xE0 comparer vos performances ?"),r(),a(6,"p"),l(7,'S\xE9lectionnez deux p\xE9riodes ci-dessus et cliquez sur "Comparer les p\xE9riodes" pour voir vos progr\xE8s.'),r()()())}var Me=class o{constructor(t,e,i,n){this.comparisonService=t;this.stravaService=e;this.statsService=i;this.router=n}period1=null;period2=null;isLoading=!1;error=null;authError=!1;hasCompared=!1;activities1=[];activities2=[];runActivities1=[];runActivities2=[];walkActivities1=[];walkActivities2=[];bikeActivities1=[];bikeActivities2=[];runComparison=null;walkComparison=null;bikeComparison=null;onPeriod1Change(t){this.period1=t}onPeriod2Change(t){this.period2=t}onCompare(){!this.period1||!this.period2||this.checkAuth()&&this.loadComparisonData()}loadComparisonData(){if(this.isLoading=!0,this.error=null,this.authError=!1,this.hasCompared=!1,!this.period1||!this.period2){this.isLoading=!1;return}this.stravaService.getActivities("2024").subscribe({next:t=>{this.stravaService.getActivities("current_year").subscribe({next:e=>{if(!this.period1||!this.period2)return;let i=new Map;[...t,...e].forEach(c=>{i.set(c.id,c)});let n=Array.from(i.values());this.activities1=this.comparisonService.filterActivitiesByPeriod(n,this.period1),this.activities2=this.comparisonService.filterActivitiesByPeriod(n,this.period2),console.log("Period 1:",this.period1.label,"- Activities:",this.activities1.length),console.log("Period 2:",this.period2.label,"- Activities:",this.activities2.length),this.filterActivitiesByType(),this.calculateComparisons(),this.isLoading=!1,this.hasCompared=!0},error:e=>{console.error("Error loading current year activities:",e),this.handleError(e)}})},error:t=>{console.error("Error loading 2024 activities:",t),this.handleError(t)}})}handleError(t){this.isLoading=!1,t.status===401?this.handleAuthError():(this.error="Une erreur est survenue lors du chargement des donn\xE9es.",this.authError=!1)}filterActivitiesByType(){this.runActivities1=this.activities1.filter(t=>t.type.includes("Run")),this.walkActivities1=this.activities1.filter(t=>t.type.includes("Hike")||t.type.includes("Walk")),this.bikeActivities1=this.activities1.filter(t=>t.type.includes("Ride")),this.runActivities2=this.activities2.filter(t=>t.type.includes("Run")),this.walkActivities2=this.activities2.filter(t=>t.type.includes("Hike")||t.type.includes("Walk")),this.bikeActivities2=this.activities2.filter(t=>t.type.includes("Ride"))}calculateComparisons(){let t=this.statsService.calculateStats(this.runActivities1),e=this.statsService.calculateStats(this.runActivities2);this.runComparison=this.comparisonService.compareStats(t,e);let i=this.statsService.calculateStats(this.walkActivities1),n=this.statsService.calculateStats(this.walkActivities2);this.walkComparison=this.comparisonService.compareStats(i,n);let c=this.statsService.calculateStats(this.bikeActivities1),m=this.statsService.calculateStats(this.bikeActivities2);this.bikeComparison=this.comparisonService.compareStats(c,m)}checkAuth(){let t=localStorage.getItem("strava_token"),e=localStorage.getItem("strava_token_expires_at");return!t||!e||Date.now()/1e3>Number(e)?(this.handleAuthError(),!1):!0}handleAuthError(){this.authError=!0,this.error=null,this.isLoading=!1}reconnectToStrava(){localStorage.clear(),this.stravaService.authenticate()}hasActivities(t){switch(t){case"run":return this.runActivities1.length>0||this.runActivities2.length>0;case"walk":return this.walkActivities1.length>0||this.walkActivities2.length>0;case"bike":return this.bikeActivities1.length>0||this.bikeActivities2.length>0;default:return!1}}static \u0275fac=function(e){return new(e||o)(A(L),A(he),A(Se),A(ve))};static \u0275cmp=M({type:o,selectors:[["app-comparison"]],standalone:!0,features:[E],decls:11,vars:6,consts:[[1,"comparison-page"],[1,"page-header"],[1,"page-description"],[3,"period1Change","period2Change","compareClick","period1","period2"],[4,"ngIf"],["class","comparison-results",4,"ngIf"],["class","initial-state",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"error-container"],[1,"error-message"],[1,"retry-button",3,"click"],[1,"comparison-results"],["class","no-activities",4,"ngIf"],["activityType","Run",3,"comparison"],["activityType","Run",3,"activities1","activities2","period1","period2"],["activityType","Walk",3,"comparison"],["activityType","Walk",3,"activities1","activities2","period1","period2"],["activityType","Bike",3,"comparison"],["activityType","Bike",3,"activities1","activities2","period1","period2"],[1,"no-activities"],[1,"no-activities-content"],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"initial-state"],[1,"initial-state-content"],["xmlns","http://www.w3.org/2000/svg","width","80","height","80","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Comparaison de p\xE9riodes"),r(),a(4,"p",2),l(5," Comparez vos performances entre deux p\xE9riodes pour suivre votre progression "),r()(),a(6,"app-comparison-period-selector",3),v("period1Change",function(c){return i.onPeriod1Change(c)})("period2Change",function(c){return i.onPeriod2Change(c)})("compareClick",function(){return i.onCompare()}),r(),h(7,Be,1,0,"app-spinner",4)(8,Qe,3,2,"ng-container",4)(9,Je,5,4,"div",5)(10,Xe,8,0,"div",6),r()),e&2&&(s(6),p("period1",i.period1)("period2",i.period2),s(),p("ngIf",i.isLoading),s(),p("ngIf",!i.isLoading),s(),p("ngIf",i.hasCompared&&!i.isLoading&&!i.error&&!i.authError),s(),p("ngIf",!i.hasCompared&&!i.isLoading))},dependencies:[D,k,K,te,ie,Ce],styles:[".comparison-page[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:24px}.page-header[_ngcontent-%COMP%]{margin-bottom:32px;text-align:center}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:var(--text-primary);margin:0 0 12px}.page-description[_ngcontent-%COMP%]{font-size:16px;color:var(--text-secondary);margin:0}.error-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:48px 24px;margin:24px 0}.error-message[_ngcontent-%COMP%]{text-align:center;background:var(--card-background);padding:32px;border-radius:12px;box-shadow:0 2px 8px #0000001a;max-width:500px}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:var(--text-primary);margin:0 0 24px}.retry-button[_ngcontent-%COMP%]{padding:12px 24px;background:var(--primary-color);color:#fff;border:none;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s ease}.retry-button[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:translateY(-1px)}.comparison-results[_ngcontent-%COMP%]{margin-top:32px}.no-activities[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:64px 24px;margin:24px 0}.no-activities-content[_ngcontent-%COMP%]{text-align:center;max-width:500px}.no-activities-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--text-secondary);opacity:.5;margin-bottom:24px}.no-activities-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:var(--text-primary);margin:0 0 12px}.no-activities-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:var(--text-secondary);margin:0}.initial-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:80px 24px;margin:24px 0}.initial-state-content[_ngcontent-%COMP%]{text-align:center;max-width:600px}.initial-state-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--primary-color);opacity:.8;margin-bottom:32px}.initial-state-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:var(--text-primary);margin:0 0 16px}.initial-state-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:var(--text-secondary);line-height:1.6;margin:0}@media (max-width: 768px){.comparison-page[_ngcontent-%COMP%]{padding:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.page-description[_ngcontent-%COMP%]{font-size:14px}.initial-state[_ngcontent-%COMP%]{padding:48px 16px}.initial-state-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px}.initial-state-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px}.no-activities[_ngcontent-%COMP%]{padding:48px 16px}.no-activities-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px}}"]})};export{Me as ComparisonComponent};
