import{c as p,e as d}from"./chunk-EQK5RWQK.js";import{Cb as u,Ib as f,La as r,Ma as c,Na as s,X as i,Xa as l,cb as m,wa as o}from"./chunk-W6ZNULKE.js";var v=class n{constructor(a,e,t){this.route=a;this.router=e;this.stravaService=t}ngOnInit(){this.route.queryParams.subscribe(a=>{let e=a.code;e?(console.log("code: "+e),this.stravaService.handleAuthCallback(e).subscribe({next:t=>{localStorage.setItem("strava_token",t.access_token),localStorage.setItem("strava_refresh_token",t.refresh_token),localStorage.setItem("strava_token_expires_at",t.expires_at),this.router.navigate(["/"])},error:t=>{console.error("Erreur d'authentification:",t),this.router.navigate(["/"])}})):this.router.navigate(["/"])})}static \u0275fac=function(e){return new(e||n)(o(p),o(d),o(f))};static \u0275cmp=i({type:n,selectors:[["app-auth-callback"]],standalone:!0,features:[m],decls:4,vars:0,consts:[[1,"callback-container"],[1,"loader"]],template:function(e,t){e&1&&(r(0,"div",0),s(1,"div",1),r(2,"p"),l(3,"Authentication en cours..."),c()())},dependencies:[u],styles:[".callback-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}.loader[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-radius:50%;border-top:4px solid #2196F3;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{v as AuthCallbackComponent};
