import{c as d,e as p}from"./chunk-C2OGMCQ2.js";import{Aa as o,Kb as u,Pa as r,Qa as c,Ra as s,Sb as v,Y as n,ab as l,ib as m}from"./chunk-QL4RVQVC.js";var f=class i{constructor(a,t,e){this.route=a;this.router=t;this.stravaService=e}ngOnInit(){this.route.queryParams.subscribe(a=>{let t=a.code;t?(console.log("code: "+t),this.stravaService.handleAuthCallback(t).subscribe({next:e=>{localStorage.setItem("strava_token",e.access_token),localStorage.setItem("strava_refresh_token",e.refresh_token),localStorage.setItem("strava_token_expires_at",e.expires_at.toString()),localStorage.setItem("strava_athlete_id",e.athlete.id.toString()),this.router.navigate(["/"])},error:e=>{console.error("Erreur d'authentification:",e),this.router.navigate(["/"])}})):this.router.navigate(["/"])})}static \u0275fac=function(t){return new(t||i)(o(d),o(p),o(v))};static \u0275cmp=n({type:i,selectors:[["app-auth-callback"]],standalone:!0,features:[m],decls:4,vars:0,consts:[[1,"callback-container"],[1,"loader"]],template:function(t,e){t&1&&(r(0,"div",0),s(1,"div",1),r(2,"p"),l(3,"Authentication en cours..."),c()())},dependencies:[u],styles:[".callback-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}.loader[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-radius:50%;border-top:4px solid #2196F3;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{f as AuthCallbackComponent};
