import{$ as l,O as c,P as i,Sa as v,_ as r,_a as h,aa as s,ab as g,gb as b,ib as S,ka as m,la as p,ob as _,ta as d,xa as u,ya as f,z as n}from"./chunk-KXPHHAN7.js";var k=class o{constructor(a,t,e){this.route=a;this.router=t;this.stravaService=e}ngOnInit(){this.route.queryParams.subscribe(a=>{let t=a.code;t?(console.log("code: "+t),this.stravaService.handleAuthCallback(t).subscribe({next:e=>{localStorage.setItem("strava_token",e.access_token),localStorage.setItem("strava_refresh_token",e.refresh_token),localStorage.setItem("strava_token_expires_at",e.expires_at.toString()),localStorage.setItem("strava_athlete_id",e.athlete.id.toString()),this.router.navigate(["/"])},error:e=>{console.error("Erreur d'authentification:",e),this.router.navigate(["/"])}})):this.router.navigate(["/"])})}static \u0275fac=function(t){return new(t||o)(i(h),i(g),i(_))};static \u0275cmp=n({type:o,selectors:[["app-auth-callback"]],standalone:!0,features:[d],decls:5,vars:3,consts:[[1,"callback-container"],[1,"loader"]],template:function(t,e){t&1&&(r(0,"div",0),s(1,"div",1),r(2,"p"),m(3),u(4,"translate"),l()()),t&2&&(c(3),p(f(4,1,"auth.callback.authenticating")))},dependencies:[v,S,b],styles:[".callback-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}.loader[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-radius:50%;border-top:4px solid #2196F3;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{k as AuthCallbackComponent};
