import{Ka as u,N as r,Qa as d,Sa as p,Y as o,Z as c,Za as v,_ as s,ia as l,qa as m,x as n}from"./chunk-4UTGUK5Q.js";var f=class i{constructor(a,e,t){this.route=a;this.router=e;this.stravaService=t}ngOnInit(){this.route.queryParams.subscribe(a=>{let e=a.code;e?(console.log("code: "+e),this.stravaService.handleAuthCallback(e).subscribe({next:t=>{localStorage.setItem("strava_token",t.access_token),localStorage.setItem("strava_refresh_token",t.refresh_token),localStorage.setItem("strava_token_expires_at",t.expires_at.toString()),localStorage.setItem("strava_athlete_id",t.athlete.id.toString()),this.stravaService.preloadAllRecentActivities().subscribe(),this.router.navigate(["/"])},error:t=>{console.error("Erreur d'authentification:",t),this.router.navigate(["/"])}})):this.router.navigate(["/"])})}static \u0275fac=function(e){return new(e||i)(r(d),r(p),r(v))};static \u0275cmp=n({type:i,selectors:[["app-auth-callback"]],standalone:!0,features:[m],decls:4,vars:0,consts:[[1,"callback-container"],[1,"loader"]],template:function(e,t){e&1&&(o(0,"div",0),s(1,"div",1),o(2,"p"),l(3,"Authentication en cours..."),c()())},dependencies:[u],styles:[".callback-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}.loader[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-radius:50%;border-top:4px solid #2196F3;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{f as AuthCallbackComponent};
