import{a as w,b as I}from"./chunk-3MJ7WGJ6.js";import{$a as P,Ea as l,Eb as E,Ga as s,Ja as i,Ka as n,La as x,Ma as v,Na as g,Oa as C,Pa as h,Qa as d,Ua as c,V as f,Va as p,Wa as m,ba as u,ca as _,ta as a,ua as y,ub as S,vb as O,wb as M,yb as b}from"./chunk-EKZZ53NY.js";function L(r,e){r&1&&x(0,"app-spinner")}function F(r,e){if(r&1&&(i(0,"div",3),c(1),n()),r&2){let t=d();a(),m(" ",t.error," ")}}function T(r,e){if(r&1&&(v(0),i(1,"div",14)(2,"span",15),c(3,"Distance"),n(),i(4,"span",16),c(5),n()(),i(6,"div",14)(7,"span",15),c(8,"Dur\xE9e"),n(),i(9,"span",16),c(10),n()(),i(11,"div",14)(12,"span",15),c(13,"Vitesse moy."),n(),i(14,"span",16),c(15),n()(),i(16,"div",14)(17,"span",15),c(18,"D\xE9nivel\xE9"),n(),i(19,"span",16),c(20),n()(),g()),r&2){let t=d().$implicit,o=d(2);a(5),m("",t.distance.toFixed(1)," km"),a(5),p(o.formatDuration(t.elapsed_time)),a(5),m("",t.average_speed.toFixed(1)," km/h"),a(5),m("",t.total_elevation_gain,"m")}}function N(r,e){if(r&1&&(v(0),i(1,"div",17)(2,"span",15),c(3,"Dur\xE9e de s\xE9ance"),n(),i(4,"span",16),c(5),n()(),g()),r&2){let t=d().$implicit,o=d(2);a(5),p(o.formatDuration(t.elapsed_time))}}function z(r,e){if(r&1&&(i(0,"div",8)(1,"div",9)(2,"div",10),c(3),n(),i(4,"div",11),c(5),n()(),i(6,"h2",12),c(7),n(),i(8,"div",13),l(9,T,21,4,"ng-container",1)(10,N,6,1,"ng-container",1),n()()),r&2){let t=e.$implicit,o=d(2);a(2),s("ngClass",t.type.toLowerCase()),a(),m(" ",t.type," "),a(2),m(" ",o.formatDate(t.start_date)," "),a(2),p(t.name),a(2),s("ngIf",o.isCardioActivity(t.type)),a(),s("ngIf",!o.isCardioActivity(t.type))}}function $(r,e){if(r&1){let t=C();i(0,"div")(1,"header",4)(2,"h1"),c(3,"Mes Activit\xE9s"),n(),i(4,"app-period-selector",5),h("periodChange",function(k){u(t);let D=d();return _(D.onPeriodChange(k))}),n()(),i(5,"div",6),l(6,z,11,6,"div",7),n()()}if(r&2){let t=d();a(4),s("selectedPeriod",t.selectedPeriod),a(2),s("ngForOf",t.activities)}}var A=class r{constructor(e){this.stravaService=e}activities=[];isLoading=!1;error=null;selectedPeriod="week";cardioActivities=["RUN","RIDE","WALK","HIKE","ALPINESKI","BACKCOUNTRYSKI"];ngOnInit(){this.loadActivities()}onPeriodChange(e){this.selectedPeriod=e,this.loadActivities()}isCardioActivity(e){return this.cardioActivities.includes(e.toUpperCase())}formatDuration(e){let t=Math.floor(e/3600),o=Math.floor(e%3600/60);return t>0?`${t}h ${o}min`:`${o}min`}formatDate(e){return new Date(e).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}loadActivities(){this.isLoading=!0,this.error=null,this.stravaService.getActivities(this.selectedPeriod).subscribe({next:e=>{this.activities=e,this.isLoading=!1},error:e=>{console.error("Error loading activities:",e),this.isLoading=!1,this.error="Une erreur est survenue lors du chargement des activit\xE9s."}})}static \u0275fac=function(t){return new(t||r)(y(E))};static \u0275cmp=f({type:r,selectors:[["app-activities"]],standalone:!0,features:[P],decls:4,vars:3,consts:[[1,"activities-container"],[4,"ngIf"],["class","error-message",4,"ngIf"],[1,"error-message"],[1,"activities-header"],[3,"periodChange","selectedPeriod"],[1,"activities-grid"],["class","activity-card",4,"ngFor","ngForOf"],[1,"activity-card"],[1,"activity-header"],[1,"activity-type",3,"ngClass"],[1,"activity-date"],[1,"activity-name"],[1,"activity-stats"],[1,"stat"],[1,"stat-label"],[1,"stat-value"],[1,"stat","stat-full-width"]],template:function(t,o){t&1&&(i(0,"div",0),l(1,L,1,0,"app-spinner",1)(2,F,2,1,"div",2)(3,$,7,2,"div",1),n()),t&2&&(a(),s("ngIf",o.isLoading),a(),s("ngIf",o.error),a(),s("ngIf",!o.isLoading&&!o.error))},dependencies:[b,S,O,M,w,I],styles:[".activities-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.activities-header[_ngcontent-%COMP%]{margin-bottom:2rem}.activities-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:var(--gray-800);margin-bottom:1rem}.activities-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem;padding:1rem 0}.activity-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--radius-md);padding:1.5rem;box-shadow:var(--shadow-sm);transition:transform .2s,box-shadow .2s}.activity-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.activity-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.activity-type[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:var(--radius-sm);font-size:.875rem;font-weight:500;text-transform:uppercase}.activity-type.run[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.activity-type.ride[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.activity-type.walk[_ngcontent-%COMP%], .activity-type.hike[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}.activity-type.weighttraining[_ngcontent-%COMP%]{background-color:#f3e5f5;color:#7b1fa2}.activity-type.alpineski[_ngcontent-%COMP%], .activity-type.backcountryski[_ngcontent-%COMP%]{background-color:#e1f5fe;color:#0288d1}.activity-date[_ngcontent-%COMP%]{font-size:.875rem;color:var(--gray-600)}.activity-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--gray-800);margin-bottom:1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.activity-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.stat-full-width[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;background-color:#f5f5f5;padding:1rem;border-radius:var(--radius-sm)}.stat-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--gray-600);text-transform:uppercase;letter-spacing:.5px}.stat-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:var(--gray-800)}.error-message[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--danger-color);background-color:#ffebee;border-radius:var(--radius-md);margin:2rem 0}@media (max-width: 768px){.activities-container[_ngcontent-%COMP%]{padding:1rem}.activities-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{A as ActivitiesComponent};
