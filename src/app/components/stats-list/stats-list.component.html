<div class="activity-header">
  <div class="title-section">
    <div class="activity-icon"
         [style.backgroundColor]="displayColor">
      <span class="icon-emoji">{{ getDisplayIcon() }}</span>
    </div>
    <div class="activity-info">
      <h2>{{ title }}</h2>
      <span class="activity-count">{{ 'activities.count_other' | translate:{ count: stats.numberOfActivities } }}</span>
    </div>
  </div>

  <button class="share-button" (click)="openShareModal()">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
      <circle cx="12" cy="12" r="4"></circle>
      <circle cx="18" cy="6" r="1.5"></circle>
    </svg>
  </button>
</div>

<div class="stats-grid">
  <app-stats-card
    *ngIf="isMetricVisible('totalElapsedTime')"
    class="double-row"
    [title]="'metrics.labels.totalElapsedTime' | translate"
    [value]="stats.totalElapsedTime"
    unit=""
    [isTime]="true">
  </app-stats-card>

  <app-stats-card
    *ngIf="isMetricVisible('averageSpeed')"
    class="double-row"
    [title]="'metrics.labels.averageSpeed' | translate"
    [value]="stats.averageSpeed"
    unit="km/h">
  </app-stats-card>

  <app-stats-card
    *ngIf="isMetricVisible('totalDistance')"
    [title]="'metrics.labels.totalDistance' | translate"
    [value]="stats.totalDistance"
    unit="km">
  </app-stats-card>

  <app-stats-card
    *ngIf="isMetricVisible('averageDistance')"
    [title]="'metrics.labels.averageDistance' | translate"
    [value]="stats.averageDistance"
    unit="km">
  </app-stats-card>

  <app-stats-card
    *ngIf="isMetricVisible('totalElevation')"
    [title]="'metrics.labels.totalElevation' | translate"
    [value]="stats.totalElevation"
    unit="m">
  </app-stats-card>

  <app-stats-card
    *ngIf="isMetricVisible('averageElevation')"
    [title]="'metrics.labels.averageElevation' | translate"
    [value]="stats.averageElevation"
    unit="m">
  </app-stats-card>
</div>

<app-share-modal
  *ngIf="showShareModal"
  [isOpen]="showShareModal"
  [stats]="stats"
  [title]="title"
  [period]="getPeriodLabel()"
  (closeModal)="closeShareModal()">
</app-share-modal>
