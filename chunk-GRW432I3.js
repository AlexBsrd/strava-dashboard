import{a as lt,b as J,c as pe,d as ct,e as Oe,f as dt,g as pt,h as mt,i as gt,j as ut,k as me,l as ge,m as ue,n as vt,o as ft,p as Ie,q as ht,r as xt}from"./chunk-EKOIQOZ2.js";import{a as kt,b as Pt,c as ve,d as Ae,e as Fe,f as Dt,g as Ve,h as Ge,i as ze,j as Le,k as Be,m as Re,n as Ot}from"./chunk-HRGRRAKU.js";import{b as _t,d as Te,e as yt,f as bt}from"./chunk-EQVGKUHK.js";import{a as wt}from"./chunk-Y356FJ7L.js";import{b as Ct}from"./chunk-ZDDGAMWZ.js";import{$ as s,Aa as Pe,C as ie,D as P,E as D,F as V,G as R,J as ae,Ja as Y,Ka as z,L as it,O as r,Oa as De,P as I,Ra as ot,Sa as F,V as w,W as Ce,X as p,Y as le,Z as K,_ as o,a as X,aa as M,ab as st,b as et,ba as ce,ca as de,da as G,ea as k,fa as _,fb as $,g as tt,ga as re,gb as N,h as ye,ha as oe,ia as se,ib as j,ja as xe,jb as H,ka as c,kb as Ee,la as y,lb as St,ma as S,na as Se,oa as Je,ob as Mt,p as nt,pa as Me,q as be,qa as we,ra as ke,ta as A,u as ne,va as at,wa as rt,xa as m,ya as v,z as E,za as Z}from"./chunk-KXPHHAN7.js";function At(a,t){if(a&1&&(o(0,"div",7)(1,"span",8),c(2),s(),o(3,"span",9),c(4,"h"),s()()),a&2){let e=_(2);r(2),y(e.timeValues.hours)}}function Ft(a,t){if(a&1&&(ce(0),o(1,"div",5),w(2,At,5,1,"div",6),o(3,"div",7)(4,"span",8),c(5),s(),o(6,"span",9),c(7,"min"),s()()(),de()),a&2){let e=_();r(),K("animating",e.animationFrameId!==null),r(),p("ngIf",e.timeValues.hours>0),r(3),y(e.timeValues.minutes)}}function Vt(a,t){if(a&1&&(o(0,"div",10),c(1),o(2,"span",11),c(3),s()()),a&2){let e=_();K("animating",e.animationFrameId!==null),r(),S(" ",e.formattedValue," "),r(2),y(e.unit)}}var Ne=class a{constructor(t){this.elementRef=t}title="";value=0;unit="";isTime=!1;currentValue=0;animationFrameId=null;ANIMATION_DURATION=2e3;hasAnimated=!1;startTime=null;observer=null;get timeValues(){if(!this.isTime)return{hours:0,minutes:0};let t=this.currentValue,e=Math.floor(t/3600),n=Math.floor(t%3600/60);return{hours:e,minutes:n}}get formattedValue(){return this.isTime?"":this.currentValue.toFixed(1)}ngOnInit(){}ngAfterViewInit(){this.setupIntersectionObserver()}ngOnChanges(t){t.value&&!t.value.firstChange&&this.startAnimation()}ngOnDestroy(){this.animationFrameId!==null&&cancelAnimationFrame(this.animationFrameId),this.observer&&this.observer.disconnect()}setupIntersectionObserver(){let t={root:null,rootMargin:"0px",threshold:.1};this.observer=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting&&!this.hasAnimated&&(this.startAnimation(),this.hasAnimated=!0)})},t),this.observer.observe(this.elementRef.nativeElement)}startAnimation(){this.animationFrameId!==null&&cancelAnimationFrame(this.animationFrameId);let t=this.currentValue,e=this.value;this.startTime=null;let n=i=>{this.startTime===null&&(this.startTime=i);let l=i-this.startTime,d=Math.min(l/this.ANIMATION_DURATION,1),g=(h=>1-Math.pow(1-h,4))(d);this.currentValue=t+(e-t)*g,d<1?this.animationFrameId=requestAnimationFrame(n):(this.currentValue=e,this.animationFrameId=null)};this.animationFrameId=requestAnimationFrame(n)}static \u0275fac=function(e){return new(e||a)(I(it))};static \u0275cmp=E({type:a,selectors:[["app-stats-card"]],inputs:{title:"title",value:"value",unit:"unit",isTime:"isTime"},standalone:!0,features:[ie,A],decls:7,vars:5,consts:[["defaultValue",""],[1,"stats-card"],[1,"stats-title"],[1,"stats-value"],[4,"ngIf","ngIfElse"],[1,"time-display"],["class","time-group",4,"ngIf"],[1,"time-group"],[1,"time-number"],[1,"time-unit"],[1,"number-display"],[1,"stats-unit"]],template:function(e,n){if(e&1&&(o(0,"div",1)(1,"div",2),c(2),s(),o(3,"div",3),w(4,Ft,8,4,"ng-container",4)(5,Vt,4,4,"ng-template",null,0,Pe),s()()),e&2){let i=xe(6);K("visible",n.hasAnimated),r(2),y(n.title),r(2),p("ngIf",n.isTime)("ngIfElse",i)}},dependencies:[F,z],styles:[".stats-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--gray-200);border-radius:var(--radius-md);box-shadow:var(--shadow-sm);display:flex;flex-direction:column;height:100%;justify-content:center;padding:1.5rem;text-align:center;transition:transform .3s,box-shadow .3s}.stats-card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md);transform:translateY(-2px)}.stats-title[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;font-weight:500;letter-spacing:.5px;margin-bottom:.75rem;text-transform:uppercase}.stats-value[_ngcontent-%COMP%]{color:var(--primary-500);font-size:2rem;font-weight:600;line-height:1.2;margin-bottom:.25rem}.number-display[_ngcontent-%COMP%], .time-display[_ngcontent-%COMP%]{font-variant-numeric:tabular-nums;transition:color .3s ease}.number-display.animating[_ngcontent-%COMP%], .time-display.animating[_ngcontent-%COMP%]{color:var(--primary-600)}.stats-unit[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;margin-left:.25rem}.time-display[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:center;gap:.75rem}.time-group[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.15rem}.time-number[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2.25rem;font-weight:600;line-height:1}.time-unit[_ngcontent-%COMP%]{color:var(--gray-600);font-size:1.25rem;font-weight:400}.time-display[_ngcontent-%COMP%]:not(:has(.hours))   .time-number[_ngcontent-%COMP%]{color:var(--primary-color)}@media (max-width: 768px){.time-display[_ngcontent-%COMP%]{gap:.5rem}.time-number[_ngcontent-%COMP%]{font-size:1.75rem}.time-unit[_ngcontent-%COMP%]{font-size:1rem}.stats-card[_ngcontent-%COMP%]{padding:1rem}}","@keyframes _ngcontent-%COMP%_slideInFromBottom{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_countUp{0%{opacity:0;transform:translateY(10px)}20%{opacity:1}to{opacity:1;transform:translateY(0)}}.stats-card[_ngcontent-%COMP%]{opacity:0}.stats-card.visible[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromBottom .6s ease-out forwards}.stats-value[_ngcontent-%COMP%]{opacity:0}.stats-card.visible[_ngcontent-%COMP%]   .stats-value[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_countUp .8s ease-out forwards;animation-delay:.3s}.stats-card.visible[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.stats-card.visible[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.stats-card.visible[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.stats-card.visible[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}@keyframes _ngcontent-%COMP%_glowPulse{0%{color:var(--primary-500)}50%{color:var(--primary-600)}to{color:var(--primary-500)}}.time-display.animating[_ngcontent-%COMP%]   .time-number[_ngcontent-%COMP%], .number-display.animating[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_glowPulse 2s ease-in-out}"]})};var Gt=["canvas"],_e=class a{canvasRef;stats;title;period="7 derniers jours";selectedTheme="modern";themes=[{value:"modern",label:"Moderne"},{value:"minimal",label:"Minimal"},{value:"dark",label:"Sombre"}];CANVAS_WIDTH=1080;CANVAS_HEIGHT=1920;themeConfigs={modern:{value:"modern",label:"Moderne",colors:{background:["#F8F9FF","#E8EFFF"],card:"#FFFFFF",cardBorder:"rgba(147, 157, 255, 0.2)",text:"#1E2243",textSecondary:"#626894",accent:"#5B6CFF",accentGradient:["#5B6CFF","#8595FF"]}},minimal:{value:"minimal",label:"Minimal",colors:{background:["#FFFFFF","#F5F5F5"],card:"#FFFFFF",cardBorder:"rgba(0, 0, 0, 0.1)",text:"#2C2C2C",textSecondary:"#757575",accent:"#2196F3",accentGradient:["#2196F3","#64B5F6"]}},dark:{value:"dark",label:"Sombre",colors:{background:["#13141C","#1C1E2C"],card:"#242736",cardBorder:"rgba(255, 255, 255, 0.1)",text:"#FFFFFF",textSecondary:"#A0A5BD",accent:"#7C85FF",accentGradient:["#7C85FF","#5B6CFF"]}}};ngAfterViewInit(){this.drawCard()}changeTheme(t){this.selectedTheme=t,this.drawCard()}generateAndDownload(){let t=this.canvasRef.nativeElement,e=document.createElement("a");e.download=`strava-stats-${Date.now()}.png`,e.href=t.toDataURL("image/png"),e.click()}createRoundRect(t,e,n,i,l,d){t.beginPath(),t.moveTo(e+d,n),t.lineTo(e+i-d,n),t.quadraticCurveTo(e+i,n,e+i,n+d),t.lineTo(e+i,n+l-d),t.quadraticCurveTo(e+i,n+l,e+i-d,n+l),t.lineTo(e+d,n+l),t.quadraticCurveTo(e,n+l,e,n+l-d),t.lineTo(e,n+d),t.quadraticCurveTo(e,n,e+d,n),t.closePath()}drawCard(){let t=this.canvasRef.nativeElement,e=t.getContext("2d"),n=this.themeConfigs[this.selectedTheme];t.width=this.CANVAS_WIDTH,t.height=this.CANVAS_HEIGHT;let i=e.createLinearGradient(0,0,0,this.CANVAS_HEIGHT);i.addColorStop(0,n.colors.background[0]),i.addColorStop(1,n.colors.background[1]),e.fillStyle=i,e.fillRect(0,0,this.CANVAS_WIDTH,this.CANVAS_HEIGHT),this.drawTexture(e,n),this.drawHeader(e,n),this.drawStats(e,n),this.drawFooter(e,n)}drawTexture(t,e){t.save(),t.globalAlpha=.03;for(let n=0;n<this.CANVAS_HEIGHT;n+=30)t.beginPath(),t.moveTo(0,n),t.lineTo(this.CANVAS_WIDTH,n),t.strokeStyle=e.colors.text,t.lineWidth=1,t.stroke();t.restore()}drawHeader(t,e){t.save(),t.globalAlpha=.1,t.fillStyle=e.colors.accent,t.beginPath(),t.arc(100,100,300,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(this.CANVAS_WIDTH-150,250,200,0,Math.PI*2),t.fill(),t.restore(),t.save(),t.font="bold 92px Inter",t.fillStyle=e.colors.text,t.textAlign="center",t.fillText(this.title.toUpperCase(),this.CANVAS_WIDTH/2,200),t.font="40px Inter",t.fillStyle=e.colors.textSecondary,t.fillText(this.period,this.CANVAS_WIDTH/2,280),t.restore()}drawStats(t,e){let n=[{label:"Distance",value:this.formatDistance(this.stats.totalDistance),icon:"\u{1F3C3}"},{label:"Temps",value:this.formatDuration(this.stats.totalElapsedTime),icon:"\u23F1\uFE0F"},{label:"Vitesse",value:this.formatSpeed(this.stats.averageSpeed),icon:"\u26A1"},{label:"D\xE9nivel\xE9",value:this.formatElevation(this.stats.totalElevation),icon:"\u26F0\uFE0F"}],i=500,l=220,d=40;n.forEach((u,g)=>{let h=i+(l+d)*g;t.save(),t.shadowColor="rgba(0, 0, 0, 0.1)",t.shadowBlur=20,t.shadowOffsetY=10,this.createRoundRect(t,120,h,this.CANVAS_WIDTH-240,l,30),t.fillStyle=e.colors.card,t.fill(),t.strokeStyle=e.colors.cardBorder,t.lineWidth=2,t.stroke(),t.restore(),t.save();let b=180,f=h+l/2-30,x=t.createLinearGradient(b,f,b,f+60);x.addColorStop(0,e.colors.accentGradient[0]),x.addColorStop(1,e.colors.accentGradient[1]),this.createRoundRect(t,b,f,60,60,15),t.fillStyle=x,t.fill(),t.restore(),t.font="30px sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(u.icon,b+30,f+30),t.font="bold 64px Inter",t.fillStyle=e.colors.text,t.textAlign="right",t.fillText(u.value,this.CANVAS_WIDTH-180,h+l/2-10),t.font="32px Inter",t.fillStyle=e.colors.textSecondary,t.fillText(u.label,this.CANVAS_WIDTH-180,h+l/2+40)})}drawFooter(t,e){t.font="32px Inter",t.fillStyle=e.colors.textSecondary,t.textAlign="center";let n=this.CANVAS_HEIGHT-100;t.save();let i=t.createLinearGradient(this.CANVAS_WIDTH/2-100,n,this.CANVAS_WIDTH/2+100,n);i.addColorStop(0,e.colors.accentGradient[0]),i.addColorStop(1,e.colors.accentGradient[1]),t.fillStyle=i,t.font="bold 36px Inter",t.fillText("STRAVA DASHBOARD",this.CANVAS_WIDTH/2,n),t.restore()}formatDistance(t){return`${t.toFixed(1)} km`}formatDuration(t){let e=Math.floor(t/3600),n=Math.floor(t%3600/60);return`${e}h ${n}min`}formatSpeed(t){return`${t.toFixed(1)} km/h`}formatElevation(t){return`${Math.round(t)}m`}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=E({type:a,selectors:[["app-instagram-card"]],viewQuery:function(e,n){if(e&1&&re(Gt,5),e&2){let i;oe(i=se())&&(n.canvasRef=i.first)}},inputs:{stats:"stats",title:"title",period:"period",selectedTheme:"selectedTheme"},standalone:!0,features:[A],decls:3,vars:0,consts:[["canvas",""],[1,"preview-canvas"]],template:function(e,n){e&1&&(o(0,"div",1),M(1,"canvas",null,0),s())},dependencies:[F],styles:[".preview-canvas[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1rem 0}canvas[_ngcontent-%COMP%]{width:360px;height:640px;border-radius:var(--radius-md);box-shadow:var(--shadow-lg)}@media (max-width: 768px){canvas[_ngcontent-%COMP%]{width:270px;height:480px}}"]})};function zt(a,t){if(a&1){let e=G();o(0,"button",16),k("click",function(){let i=P(e).$implicit,l=_(2);return D(l.changeTheme(i.value))}),c(1),s()}if(a&2){let e=t.$implicit,n=_(2);K("active",n.selectedTheme===e.value),r(),S(" ",e.label," ")}}function Lt(a,t){if(a&1){let e=G();o(0,"div",1),k("click",function(){P(e);let i=_();return D(i.close())}),o(1,"div",2),k("click",function(i){return P(e),D(i.stopPropagation())}),o(2,"div",3)(3,"h2",4),c(4,"Cr\xE9er une story Instagram"),s(),o(5,"button",5),k("click",function(){P(e);let i=_();return D(i.close())}),V(),o(6,"svg",6),M(7,"line",7)(8,"line",8),s()()(),R(),o(9,"div",9),w(10,zt,2,3,"button",10),s(),o(11,"div",11),M(12,"app-instagram-card",12),s(),o(13,"div",13)(14,"button",14),k("click",function(){P(e);let i=_();return D(i.close())}),c(15,"Annuler"),s(),o(16,"button",15),k("click",function(){P(e);let i=_();return D(i.download())}),c(17,"T\xE9l\xE9charger"),s()()()()}if(a&2){let e=_();r(10),p("ngForOf",e.themes),r(2),p("stats",e.stats)("title",e.title)("period",e.period)("selectedTheme",e.selectedTheme)}}var je=class a{instagramCard;isOpen=!1;stats;title;period;closeModal=new ae;selectedTheme="modern";themes=[{value:"modern",label:"Moderne"},{value:"minimal",label:"Minimal"},{value:"dark",label:"Sombre"}];close(){this.closeModal.emit()}changeTheme(t){this.selectedTheme=t,this.instagramCard&&setTimeout(()=>{this.instagramCard.changeTheme(t)})}download(){this.instagramCard&&this.instagramCard.generateAndDownload()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=E({type:a,selectors:[["app-share-modal"]],viewQuery:function(e,n){if(e&1&&re(_e,5),e&2){let i;oe(i=se())&&(n.instagramCard=i.first)}},inputs:{isOpen:"isOpen",stats:"stats",title:"title",period:"period"},outputs:{closeModal:"closeModal"},standalone:!0,features:[A],decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"close-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"theme-selector"],["class","theme-button",3,"active","click",4,"ngFor","ngForOf"],[1,"preview"],[3,"stats","title","period","selectedTheme"],[1,"action-buttons"],[1,"cancel-btn",3,"click"],[1,"generate-btn",3,"click"],[1,"theme-button",3,"click"]],template:function(e,n){e&1&&w(0,Lt,18,5,"div",0),e&2&&p("ngIf",n.isOpen)},dependencies:[F,Y,z,_e],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:var(--radius-lg);padding:2rem;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:var(--shadow-xl)}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary);margin:0}.close-button[_ngcontent-%COMP%]{background:none;border:none;padding:.5rem;cursor:pointer;color:var(--text-secondary);border-radius:var(--radius-sm);transition:all .2s}.close-button[_ngcontent-%COMP%]:hover{background:var(--gray-100);color:var(--text-primary)}.preview[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1rem 0}.theme-selector[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.5rem;justify-content:center}.theme-button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:2px solid var(--primary-500);border-radius:var(--radius-md);background:transparent;color:var(--text-primary);cursor:pointer;transition:all .2s}.theme-button.active[_ngcontent-%COMP%]{background:var(--primary-500);color:#fff}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--gray-200)}.cancel-btn[_ngcontent-%COMP%], .generate-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:var(--radius-md);cursor:pointer;border:none;font-weight:500;transition:all .2s}.cancel-btn[_ngcontent-%COMP%]{background:var(--gray-200);color:var(--text-primary)}.generate-btn[_ngcontent-%COMP%]{background:var(--primary-500);color:#fff}.cancel-btn[_ngcontent-%COMP%]:hover{background:var(--gray-300)}.generate-btn[_ngcontent-%COMP%]:hover{background:var(--primary-600)}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{width:95%;padding:1.5rem}}"]})};var Bt=a=>({count:a});function Rt(a,t){if(a&1&&(M(0,"app-stats-card",17),m(1,"translate")),a&2){let e=_();p("title",v(1,3,"metrics.labels.totalElapsedTime"))("value",e.stats.totalElapsedTime)("isTime",!0)}}function Nt(a,t){if(a&1&&(M(0,"app-stats-card",18),m(1,"translate")),a&2){let e=_();p("title",v(1,2,"metrics.labels.averageSpeed"))("value",e.stats.averageSpeed)}}function jt(a,t){if(a&1&&(M(0,"app-stats-card",19),m(1,"translate")),a&2){let e=_();p("title",v(1,2,"metrics.labels.totalDistance"))("value",e.stats.totalDistance)}}function Wt(a,t){if(a&1&&(M(0,"app-stats-card",19),m(1,"translate")),a&2){let e=_();p("title",v(1,2,"metrics.labels.averageDistance"))("value",e.stats.averageDistance)}}function $t(a,t){if(a&1&&(M(0,"app-stats-card",20),m(1,"translate")),a&2){let e=_();p("title",v(1,2,"metrics.labels.totalElevation"))("value",e.stats.totalElevation)}}function Ht(a,t){if(a&1&&(M(0,"app-stats-card",20),m(1,"translate")),a&2){let e=_();p("title",v(1,2,"metrics.labels.averageElevation"))("value",e.stats.averageElevation)}}function Kt(a,t){if(a&1){let e=G();o(0,"app-share-modal",21),k("closeModal",function(){P(e);let i=_();return D(i.closeShareModal())}),s()}if(a&2){let e=_();p("isOpen",e.showShareModal)("stats",e.stats)("title",e.title)("period",e.getPeriodLabel())}}var We=class a{constructor(t){this.translateService=t}stats;title;selectedPeriod="week";groupColor;groupIcon;visibleMetrics;showShareModal=!1;isMetricVisible(t){return(this.visibleMetrics||_t).includes(t)}get activityType(){return this.title.toLowerCase()}get displayColor(){if(this.groupColor)return this.groupColor;switch(this.title.toLowerCase()){case"run":case"course":return"#ef4444";case"walk":case"marche":return"#22c55e";case"bike":case"v\xE9lo":return"#3b82f6";default:return"#6366f1"}}openShareModal(){this.showShareModal=!0}closeShareModal(){this.showShareModal=!1}getPeriodLabel(){switch(this.selectedPeriod){case"week":return this.translateService.instant("sidebar.period.last7days");case"month":return this.translateService.instant("sidebar.period.last30days");case"current_year":return this.translateService.instant("sidebar.period.sinceJan1");default:let t=parseInt(this.selectedPeriod,10);return isNaN(t)?"":this.translateService.instant("sidebar.period.year",{year:t})}}getIconEmoji(t){return{run:"\u{1F3C3}",bike:"\u{1F6B4}",walk:"\u{1F6B6}",hike:"\u{1F97E}",trail:"\u{1F3C3}\u200D\u2642\uFE0F",swim:"\u{1F3CA}",ski:"\u26F7\uFE0F",weight:"\u{1F3CB}\uFE0F",yoga:"\u{1F9D8}",activity:"\u{1F4AA}",fitness:"\u{1F4AA}",workout:"\u{1F3C3}",crossfit:"\u{1F3CB}\uFE0F\u200D\u2642\uFE0F"}[t]||"\u{1F3C3}"}getDisplayIcon(){if(this.groupIcon)return this.getIconEmoji(this.groupIcon);let t=this.title.toLowerCase();return t.includes("course")||t.includes("run")?"\u{1F3C3}":t.includes("v\xE9lo")||t.includes("bike")?"\u{1F6B4}":t.includes("marche")||t.includes("walk")?"\u{1F6B6}":"\u{1F4AA}"}static \u0275fac=function(e){return new(e||a)(I($))};static \u0275cmp=E({type:a,selectors:[["app-stats-list"]],inputs:{stats:"stats",title:"title",selectedPeriod:"selectedPeriod",groupColor:"groupColor",groupIcon:"groupIcon",visibleMetrics:"visibleMetrics"},standalone:!0,features:[A],decls:24,vars:17,consts:[[1,"activity-header"],[1,"title-section"],[1,"activity-icon"],[1,"icon-emoji"],[1,"activity-info"],[1,"activity-count"],[1,"share-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x","2","y","2","width","20","height","20","rx","5","ry","5"],["cx","12","cy","12","r","4"],["cx","18","cy","6","r","1.5"],[1,"stats-grid"],["class","double-row","unit","",3,"title","value","isTime",4,"ngIf"],["class","double-row","unit","km/h",3,"title","value",4,"ngIf"],["unit","km",3,"title","value",4,"ngIf"],["unit","m",3,"title","value",4,"ngIf"],[3,"isOpen","stats","title","period","closeModal",4,"ngIf"],["unit","",1,"double-row",3,"title","value","isTime"],["unit","km/h",1,"double-row",3,"title","value"],["unit","km",3,"title","value"],["unit","m",3,"title","value"],[3,"closeModal","isOpen","stats","title","period"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),c(4),s()(),o(5,"div",4)(6,"h2"),c(7),s(),o(8,"span",5),c(9),m(10,"translate"),s()()(),o(11,"button",6),k("click",function(){return n.openShareModal()}),V(),o(12,"svg",7),M(13,"rect",8)(14,"circle",9)(15,"circle",10),s()()(),R(),o(16,"div",11),w(17,Rt,2,5,"app-stats-card",12)(18,Nt,2,4,"app-stats-card",13)(19,jt,2,4,"app-stats-card",14)(20,Wt,2,4,"app-stats-card",14)(21,$t,2,4,"app-stats-card",15)(22,Ht,2,4,"app-stats-card",15),s(),w(23,Kt,1,4,"app-share-modal",16)),e&2&&(r(2),le("background-color",n.displayColor),r(2),y(n.getDisplayIcon()),r(3),y(n.title),r(2),y(Z(10,12,"activities.count_other",at(15,Bt,n.stats.numberOfActivities))),r(8),p("ngIf",n.isMetricVisible("totalElapsedTime")),r(),p("ngIf",n.isMetricVisible("averageSpeed")),r(),p("ngIf",n.isMetricVisible("totalDistance")),r(),p("ngIf",n.isMetricVisible("averageDistance")),r(),p("ngIf",n.isMetricVisible("totalElevation")),r(),p("ngIf",n.isMetricVisible("averageElevation")),r(),p("ngIf",n.showShareModal))},dependencies:[F,z,j,N,Ne,je],styles:[`.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;@media (max-width: 1024px){grid-template-columns:repeat(2,1fr)}@media (max-width: 640px){grid-template-columns:1fr}}.activity-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem;margin-top:2rem}.activity-header[_ngcontent-%COMP%]:first-child{margin-top:0}.activity-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;position:relative}.activity-icon[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;border-radius:8px;opacity:.15}.activity-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:1.5rem;font-weight:600;color:#2d2d2d;margin:0;padding:0}.activity-count[_ngcontent-%COMP%]{font-size:.9rem;color:var(--gray-600)}.activity-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:24px;height:24px;background-repeat:no-repeat;background-position:center;background-size:contain}.activity-icon[_ngcontent-%COMP%]   .icon-emoji[_ngcontent-%COMP%]{font-size:24px;line-height:1;filter:brightness(0) invert(1)}.activity-icon.run[_ngcontent-%COMP%]{color:#ff5722}.activity-icon.run[_ngcontent-%COMP%]:before{background-color:#ff5722}.activity-icon.run[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FF5722'%3E%3Cpath d='M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z'/%3E%3C/svg%3E")}.activity-icon.walk[_ngcontent-%COMP%]{color:#4caf50}.activity-icon.walk[_ngcontent-%COMP%]:before{background-color:#4caf50}.activity-icon.walk[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%234CAF50' viewBox='0 0 24 24'%3E%3Cpath d='M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7'/%3E%3C/svg%3E")}.activity-icon.bike[_ngcontent-%COMP%]{color:#2196f3}.activity-icon.bike[_ngcontent-%COMP%]:before{background-color:#2196f3}.activity-icon.bike[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%232196F3' viewBox='0 0 24 24'%3E%3Cpath d='M15.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5zm5.8-10l2.4-2.4.8.8c1.3 1.3 3 2.1 5.1 2.1V9c-1.5 0-2.7-.6-3.6-1.5l-1.9-1.9c-.5-.4-1-.6-1.6-.6s-1.1.2-1.4.6L7.8 8.4c-.4.4-.6.9-.6 1.4 0 .6.2 1.1.6 1.4L11 14v5h2v-6.2l-2.2-2.3zM19 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5z'/%3E%3C/svg%3E")}@media (max-width: 768px){.activity-icon[_ngcontent-%COMP%]{width:32px;height:32px}.activity-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}.activity-count[_ngcontent-%COMP%]{font-size:.8rem}}@media (max-width: 1024px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.double-row[_ngcontent-%COMP%]{grid-row:span 2;grid-column:span 1}}.activity-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem}.title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.activity-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;position:relative}.activity-icon[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;border-radius:12px;opacity:.15}.activity-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.activity-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:1.5rem;font-weight:600;color:var(--text-primary);margin:0}.activity-count[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.share-button[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f09433,#e6683c,#dc2743,#cc2366,#bc1888);color:#fff;border:none;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;box-shadow:var(--shadow-sm)}.share-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md);filter:brightness(1.1)}.share-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.share-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0px 1px 2px rgba(0,0,0,.1))}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}.double-row[_ngcontent-%COMP%]{grid-row:span 2;grid-column:span 1}@media (max-width: 1024px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 640px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:12px}.double-row[_ngcontent-%COMP%]{grid-row:span 1}}`,"@keyframes _ngcontent-%COMP%_fadeSlideIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.activity-header[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeSlideIn .8s ease-out forwards;opacity:0}.stats-grid[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeSlideIn .8s ease-out forwards;animation-delay:.2s}@keyframes _ngcontent-%COMP%_rotateIn{0%{opacity:0;transform:rotate(-180deg) scale(.3)}to{opacity:1;transform:rotate(0) scale(1)}}.share-button[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotateIn .8s cubic-bezier(.34,1.56,.64,1) backwards;animation-delay:1s}.share-button[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .82s cubic-bezier(.36,.07,.19,.97) both;transform:translateZ(0);backface-visibility:hidden;perspective:1000px}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}@keyframes _ngcontent-%COMP%_bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:.9;transform:scale(1.1)}80%{transform:scale(.89)}to{opacity:1;transform:scale(1)}}.activity-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounceIn .8s cubic-bezier(.68,-.55,.265,1.55) forwards}.activity-icon[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_pulseBackground 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulseBackground{0%{opacity:.1}50%{opacity:.2}to{opacity:.1}}"]})};var $e=class a{analyzePerformances(t){let e={value:0,date:new Date,activityName:""},n={fiveKm:X({},e),tenKm:X({},e),semi:X({},e),marathon:X({},e)};return t.forEach(i=>{let l=i.average_speed,d=i.distance;d>=41.695&&(l>n.marathon.value||n.marathon.value===0)&&(n.marathon={value:l,date:new Date(i.start_date),activityName:i.name}),d>=20.6&&(l>n.semi.value||n.semi.value===0)&&(n.semi={value:l,date:new Date(i.start_date),activityName:i.name}),d>=9.5&&(l>n.tenKm.value||n.tenKm.value===0)&&(n.tenKm={value:l,date:new Date(i.start_date),activityName:i.name}),d>=4.7&&(l>n.fiveKm.value||n.fiveKm.value===0)&&(n.fiveKm={value:l,date:new Date(i.start_date),activityName:i.name})}),{bestRaces:n}}static \u0275fac=function(e){return new(e||a)};static \u0275prov=ne({token:a,factory:a.\u0275fac,providedIn:"root"})};function Ut(a,t){if(a&1&&(o(0,"div",7)(1,"div",8),c(2,"5 KM"),s(),o(3,"div",9),c(4),m(5,"number"),s(),o(6,"div",10),c(7),s(),o(8,"div",11),c(9),o(10,"small"),c(11),s()()()),a&2){let e=_(2);r(4),S("",Z(5,4,e.metrics.bestRaces.fiveKm.value,"1.1-1")," km/h"),r(3),S("",e.calculatePace(e.metrics.bestRaces.fiveKm.value)," min/km"),r(2),S(" ",e.metrics.bestRaces.fiveKm.activityName," "),r(2),y(e.formatDate(e.metrics.bestRaces.fiveKm.date))}}function Qt(a,t){if(a&1&&(o(0,"div",7)(1,"div",8),c(2,"10 KM"),s(),o(3,"div",9),c(4),m(5,"number"),s(),o(6,"div",10),c(7),s(),o(8,"div",11),c(9),o(10,"small"),c(11),s()()()),a&2){let e=_(2);r(4),S("",Z(5,4,e.metrics.bestRaces.tenKm.value,"1.1-1")," km/h"),r(3),S("",e.calculatePace(e.metrics.bestRaces.tenKm.value)," min/km"),r(2),S(" ",e.metrics.bestRaces.tenKm.activityName," "),r(2),y(e.formatDate(e.metrics.bestRaces.tenKm.date))}}function qt(a,t){if(a&1&&(o(0,"div",7)(1,"div",8),c(2),m(3,"translate"),s(),o(4,"div",9),c(5),m(6,"number"),s(),o(7,"div",10),c(8),s(),o(9,"div",11),c(10),o(11,"small"),c(12),s()()()),a&2){let e=_(2);r(2),y(v(3,5,"performance.races.half_marathon")),r(3),S("",Z(6,7,e.metrics.bestRaces.semi.value,"1.1-1")," km/h"),r(3),S("",e.calculatePace(e.metrics.bestRaces.semi.value)," min/km"),r(2),S(" ",e.metrics.bestRaces.semi.activityName," "),r(2),y(e.formatDate(e.metrics.bestRaces.semi.date))}}function Xt(a,t){if(a&1&&(o(0,"div",7)(1,"div",8),c(2,"Marathon"),s(),o(3,"div",9),c(4),m(5,"number"),s(),o(6,"div",10),c(7),s(),o(8,"div",11),c(9),o(10,"small"),c(11),s()()()),a&2){let e=_(2);r(4),S("",Z(5,4,e.metrics.bestRaces.marathon.value,"1.1-1")," km/h"),r(3),S("",e.calculatePace(e.metrics.bestRaces.marathon.value)," min/km"),r(2),S(" ",e.metrics.bestRaces.marathon.activityName," "),r(2),y(e.formatDate(e.metrics.bestRaces.marathon.date))}}function Zt(a,t){if(a&1&&(ce(0),o(1,"div",2)(2,"div",3)(3,"p",4),c(4),m(5,"translate"),s(),o(6,"h2"),c(7),m(8,"translate"),s(),o(9,"div",5),w(10,Ut,12,7,"div",6)(11,Qt,12,7,"div",6)(12,qt,13,10,"div",6)(13,Xt,12,7,"div",6),s()()(),de()),a&2){let e=_();r(4),y(v(5,6,"performance.mobile_hint")),r(3),y(v(8,8,"performance.title")),r(3),p("ngIf",e.metrics==null||e.metrics.bestRaces==null||e.metrics.bestRaces.fiveKm==null?null:e.metrics.bestRaces.fiveKm.value),r(),p("ngIf",e.metrics==null||e.metrics.bestRaces==null||e.metrics.bestRaces.tenKm==null?null:e.metrics.bestRaces.tenKm.value),r(),p("ngIf",e.metrics==null||e.metrics.bestRaces==null||e.metrics.bestRaces.semi==null?null:e.metrics.bestRaces.semi.value),r(),p("ngIf",e.metrics==null||e.metrics.bestRaces==null||e.metrics.bestRaces.marathon==null?null:e.metrics.bestRaces.marathon.value)}}function Jt(a,t){a&1&&(o(0,"div",2)(1,"div",12)(2,"div",13)(3,"i",14),c(4,"\u{1F3C3}"),s(),o(5,"div",15)(6,"h2"),c(7),m(8,"translate"),s(),o(9,"p"),c(10),m(11,"translate"),s(),o(12,"ul")(13,"li"),c(14),m(15,"translate"),s(),o(16,"li"),c(17),m(18,"translate"),s(),o(19,"li"),c(20),m(21,"translate"),s(),o(22,"li"),c(23,"Marathon"),s()()()()()()),a&2&&(r(7),y(v(8,5,"performance.no_records")),r(3),y(v(11,7,"performance.keep_training")),r(4),y(v(15,9,"performance.races.five_km")),r(3),y(v(18,11,"performance.races.ten_km")),r(3),y(v(21,13,"performance.races.half_marathon")))}var He=class a{constructor(t,e){this.performanceService=t;this.translateService=e}activities=[];metrics;ngOnChanges(){this.activities.length&&(this.metrics=this.performanceService.analyzePerformances(this.activities))}hasRecords(){return this.metrics?.bestRaces?!!(this.metrics.bestRaces.fiveKm.value||this.metrics.bestRaces.tenKm.value||this.metrics.bestRaces.semi.value||this.metrics.bestRaces.marathon.value):!1}formatDate(t){let e=this.translateService.currentLang==="en"?"en-US":"fr-FR";return new Date(t).toLocaleDateString(e,{day:"numeric",month:"long",year:"numeric"})}calculatePace(t){let e=60/t,n=Math.floor(e),i=Math.round((e-n)*60);return`${n}'${i.toString().padStart(2,"0")}"`}static \u0275fac=function(e){return new(e||a)(I($e),I($))};static \u0275cmp=E({type:a,selectors:[["app-performance-dashboard"]],inputs:{activities:"activities"},standalone:!0,features:[ie,A],decls:3,vars:2,consts:[["noRecords",""],[4,"ngIf","ngIfElse"],[1,"performance-container"],[1,"section","best-performances"],[1,"mobile-hint"],[1,"records-grid"],["class","record-card",4,"ngIf"],[1,"record-card"],[1,"record-title"],[1,"record-value"],[1,"record-pace"],[1,"record-details"],[1,"section","empty-state"],[1,"empty-state-content"],[1,"empty-state-icon"],[1,"empty-state-text"]],template:function(e,n){if(e&1&&w(0,Zt,14,10,"ng-container",1)(1,Jt,24,15,"ng-template",null,0,Pe),e&2){let i=xe(2);p("ngIf",n.hasRecords())("ngIfElse",i)}},dependencies:[F,z,ot,j,N],styles:['.performance-container[_ngcontent-%COMP%]{padding:.75rem}.section[_ngcontent-%COMP%]{margin-bottom:1rem;background:var(--bg-primary);border-radius:var(--radius-md);padding:1rem;box-shadow:var(--shadow-sm)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:1.5rem 1rem;display:flex;align-items:center;justify-content:center;background:var(--bg-primary);border-radius:var(--radius-md);box-shadow:var(--shadow-sm)}.empty-state-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;max-width:100%}.empty-state-icon[_ngcontent-%COMP%]{font-size:2rem;margin:0}.empty-state-text[_ngcontent-%COMP%]{text-align:left}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.1rem;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:.5rem;font-size:.9rem}.empty-state[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;color:var(--text-secondary);margin:0;display:flex;gap:1rem;flex-wrap:wrap}.empty-state[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;font-weight:500;font-size:.9rem}.empty-state[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{content:"\\2022";margin-left:1rem}.mobile-hint[_ngcontent-%COMP%]{display:none;color:var(--text-secondary);font-size:.75rem;margin:0 0 1rem;padding:.5rem .75rem;background:var(--bg-secondary);border-radius:var(--radius-sm);border-left:3px solid var(--primary-500)}h2[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.25rem;margin-bottom:1.5rem;font-weight:600}.records-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.record-card[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,var(--primary-100),var(--bg-primary));padding:1.5rem;border-radius:var(--radius-md);box-shadow:var(--shadow-sm);transition:transform .2s,box-shadow .2s;position:relative;overflow:hidden}[data-theme=light][_ngcontent-%COMP%]   .record-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#fff3,#fff6,#ffffff1a);pointer-events:none}[data-theme=dark][_ngcontent-%COMP%]   .record-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#ffffff0d,#ffffff1a,#ffffff05);pointer-events:none}.record-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.record-title[_ngcontent-%COMP%]{font-weight:600;color:var(--primary-500);font-size:1.1rem;margin-bottom:.5rem;position:relative}.record-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-primary);margin-bottom:.25rem;position:relative}.record-pace[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin-bottom:.75rem;font-weight:500;position:relative}.record-details[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary);position:relative}.record-details[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:.25rem}@media (max-width: 768px){.mobile-hint[_ngcontent-%COMP%]{display:block}.performance-container[_ngcontent-%COMP%], .section[_ngcontent-%COMP%]{padding:1rem}.records-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:1rem}.empty-state[_ngcontent-%COMP%]{padding:2rem 1rem}}']})};var he=class a{isFullscreenSubject=new ye(!1);isFullscreen$=this.isFullscreenSubject.asObservable();toggleFullscreen(t){document.fullscreenElement?(document.exitFullscreen(),this.isFullscreenSubject.next(!1)):(t.requestFullscreen().catch(e=>{console.error(`Erreur lors du passage en plein \xE9cran : ${e.message}`)}),this.isFullscreenSubject.next(!0),document.addEventListener("fullscreenchange",this.handleFullscreenChange))}handleFullscreenChange=()=>{document.fullscreenElement||this.isFullscreenSubject.next(!1)};static \u0275fac=function(e){return new(e||a)};static \u0275prov=ne({token:a,factory:a.\u0275fac,providedIn:"root"})};var en=["chartContainer"];function tn(a,t){if(a&1&&(o(0,"option",21),c(1),s()),a&2){let e=t.$implicit;p("value",e),r(),S(" ",e," ")}}function nn(a,t){if(a&1){let e=G();o(0,"div",22)(1,"div",23)(2,"label",24)(3,"input",25),k("change",function(){P(e);let i=_();return D(i.onGroupingChange("none"))}),s(),c(4),m(5,"translate"),s(),o(6,"label",24)(7,"input",26),k("change",function(){P(e);let i=_();return D(i.onGroupingChange("week"))}),s(),c(8),m(9,"translate"),s(),o(10,"label",24)(11,"input",27),k("change",function(){P(e);let i=_();return D(i.onGroupingChange("month"))}),s(),c(12),m(13,"translate"),s()()()}if(a&2){let e=_();r(3),p("checked",e.groupingType==="none"),r(),S(" ",v(5,6,"chart.grouping.none")," "),r(3),p("checked",e.groupingType==="week"),r(),S(" ",v(9,8,"chart.grouping.by_week")," "),r(3),p("checked",e.groupingType==="month"),r(),S(" ",v(13,10,"chart.grouping.by_month")," ")}}function an(a,t){if(a&1){let e=G();o(0,"button",28),k("click",function(){let i=P(e).$implicit,l=_();return D(l.toggleMetric(i.value))}),c(1),s()}if(a&2){let e=t.$implicit,n=_();le("--metric-color",e.color),K("active",n.isMetricSelected(e.value)),r(),S(" ",n.getMetricLabel(e)," ")}}function rn(a,t){a&1&&(V(),M(0,"path",29))}function on(a,t){a&1&&(V(),M(0,"path",30))}ve.register(Be,Le,Fe,Ae,kt,Ge,ze,Ve,Dt,Re);var Ke=class a{constructor(t,e){this.fullscreenService=t;this.translateService=e;this.isFullscreen$=this.fullscreenService.isFullscreen$}activities=[];period="week";selectedActivityType="Run";selectedMetrics=["speed"];chart=null;groupingType="none";activityTypes=["Run","Ride","Walk/Hike"];metrics=[{value:"speed",labelKey:"chart.metrics.speed",color:"#2196F3"},{value:"distance",labelKey:"chart.metrics.distance",color:"#4CAF50"},{value:"elevation",labelKey:"chart.metrics.elevation",color:"#FF9800"},{value:"duration",labelKey:"chart.metrics.duration",color:"#9C27B0"}];chartContainer;isFullscreen$;ngOnInit(){this.translateService.onLangChange.subscribe(()=>{this.chart&&this.updateChart()})}getLocale(){return this.translateService.currentLang==="en"?"en-US":"fr-FR"}getMetricLabel(t){return this.translateService.instant(t.labelKey)}toggleFullscreen(){this.chartContainer&&this.fullscreenService.toggleFullscreen(this.chartContainer.nativeElement)}isYearOrCurrentYear(){return this.period==="current_year"||H(this.period)}ngOnChanges(t){(t.activities||t.period)&&this.activities&&this.updateChart()}onActivityTypeChange(t){this.selectedActivityType=t,this.updateChart()}onGroupingChange(t){this.groupingType=t,this.updateChart()}toggleMetric(t){let e=this.selectedMetrics.indexOf(t);e===-1?this.selectedMetrics.push(t):this.selectedMetrics.splice(e,1),this.updateChart()}isMetricSelected(t){return this.selectedMetrics.includes(t)}zoomIn(){this.chart&&this.chart.zoom(1.2)}zoomOut(){this.chart&&this.chart.zoom(.8)}resetZoom(){this.chart&&this.chart.resetZoom()}getWeekNumber(t){let e=new Date(t.getFullYear(),0,1),n=(t.getTime()-e.getTime())/864e5;return Math.ceil((n+e.getDay()+1)/7)}getWeekRange(t){let e=new Date(t);e.setDate(t.getDate()-t.getDay()+1);let n=new Date(e);return n.setDate(e.getDate()+6),{start:e,end:n}}groupActivitiesByWeek(t){if(!t.length)return[];let e=new Map;return t.forEach(n=>{let i=new Date(n.start_date),l=this.getWeekNumber(i),d=this.getWeekRange(i);e.has(l)||e.set(l,{weekNumber:l,weekLabel:`S${l}`,weekStart:d.start,weekEnd:d.end,totalDistance:0,totalDuration:0,averageSpeed:0,totalElevation:0,activitiesCount:0,activities:[]});let u=e.get(l);u.totalDistance+=n.distance,u.totalDuration+=n.elapsed_time,u.totalElevation+=n.total_elevation_gain,u.activitiesCount+=1,u.activities.push({name:n.name,date:new Date(n.start_date)})}),e.forEach(n=>{n.averageSpeed=n.totalDistance/(n.totalDuration/3600)||0,n.activities.sort((i,l)=>l.date.getTime()-i.date.getTime())}),Array.from(e.values()).sort((n,i)=>n.weekNumber-i.weekNumber)}groupActivitiesByMonth(t){if(!t.length)return[];let e=new Map;return t.forEach(n=>{let i=new Date(n.start_date),l=i.getMonth(),d=i.getFullYear(),u=d*100+l;if(!e.has(u)){let h=new Date(d,l,1),b=new Date(d,l+1,0),f=h.toLocaleDateString("fr-FR",{month:"long"});e.set(u,{monthNumber:l,monthLabel:f,monthStart:h,monthEnd:b,totalDistance:0,totalDuration:0,averageSpeed:0,totalElevation:0,activitiesCount:0,activities:[]})}let g=e.get(u);g.totalDistance+=n.distance,g.totalDuration+=n.elapsed_time,g.totalElevation+=n.total_elevation_gain,g.activitiesCount+=1,g.activities.push({name:n.name,date:new Date(n.start_date)})}),e.forEach(n=>{n.averageSpeed=n.totalDistance/(n.totalDuration/3600)||0,n.activities.sort((i,l)=>l.date.getTime()-i.date.getTime())}),Array.from(e.values()).sort((n,i)=>n.monthStart.getTime()-i.monthStart.getTime())}getFilteredActivities(){if(!this.activities)return[];let t=[...this.activities];switch(this.selectedActivityType){case"Run":t=t.filter(e=>e.type.includes("Run"));break;case"Ride":t=t.filter(e=>e.type.includes("Ride"));break;case"Walk/Hike":t=t.filter(e=>e.type.includes("Hike")||e.type.includes("Walk"));break}return t.sort((e,n)=>new Date(e.start_date).getTime()-new Date(n.start_date).getTime())}generateDateLabels(){let t=new Date,e=[],n=[];if((this.period==="current_year"||H(this.period))&&this.groupingType==="week"){let i=Ee(this.period)??t.getFullYear(),l=new Date(i,0,1),d=new Date(i,11,31),u=new Date(l);u.setDate(u.getDate()+(8-u.getDay())%7);let g=[],h=new Date(u);for(;h<=d;){let f=this.getWeekNumber(h),x=this.getWeekRange(h);g.push({weekNumber:f,weekLabel:`S${f}`,weekStart:new Date(x.start),weekEnd:new Date(x.end),totalDistance:0,totalDuration:0,averageSpeed:0,totalElevation:0,activitiesCount:0,activities:[]}),h.setDate(h.getDate()+7)}this.getFilteredActivities().forEach(f=>{let x=new Date(f.start_date),O=this.getWeekNumber(x),C=g.find(T=>T.weekNumber===O);C&&(C.totalDistance+=f.distance,C.totalDuration+=f.elapsed_time,C.totalElevation+=f.total_elevation_gain,C.activitiesCount+=1,C.activities.push({name:f.name,date:new Date(f.start_date)}))}),g.forEach(f=>{f.averageSpeed=f.totalDistance/(f.totalDuration/3600)||0,f.activities.sort((x,O)=>O.date.getTime()-x.date.getTime())}),e.push(...g.map(f=>f.weekStart)),n=g}else if((this.period==="current_year"||H(this.period))&&this.groupingType==="month"){let i=Ee(this.period)??t.getFullYear(),l=[];for(let u=0;u<12;u++){let g=new Date(i,u,1),h=new Date(i,u+1,0),b=g.toLocaleDateString("fr-FR",{month:"long"});l.push({monthNumber:u,monthLabel:b,monthStart:g,monthEnd:h,totalDistance:0,totalDuration:0,averageSpeed:0,totalElevation:0,activitiesCount:0,activities:[]})}this.getFilteredActivities().forEach(u=>{let h=new Date(u.start_date).getMonth(),b=l.find(f=>f.monthNumber===h);b&&(b.totalDistance+=u.distance,b.totalDuration+=u.elapsed_time,b.totalElevation+=u.total_elevation_gain,b.activitiesCount+=1,b.activities.push({name:u.name,date:new Date(u.start_date)}))}),l.forEach(u=>{u.averageSpeed=u.totalDistance/(u.totalDuration/3600)||0,u.activities.sort((g,h)=>h.date.getTime()-g.date.getTime())}),e.push(...l.map(u=>u.monthStart)),n=l}else{let i,l=new Date(t);switch(this.period){case"week":i=new Date(t),i.setDate(t.getDate()-6);break;case"month":i=new Date(t),i.setDate(t.getDate()-29);break;case"current_year":i=new Date(t.getFullYear(),0,1),i.setHours(0,0,0,0);break;default:let u=Ee(this.period);u!==null?(i=new Date(u,0,1),l=new Date(u,11,31)):(i=new Date(t),i.setDate(t.getDate()-6));break}let d=new Date(i);for(;d<=l;)e.push(new Date(d)),d.setDate(d.getDate()+1);n=this.getFilteredActivities()}return[e,n]}createDataMap(t,e){let n=new Map;return(this.period==="current_year"||H(this.period))&&this.groupingType==="week"?e.forEach(i=>{n.set(i.weekNumber.toString(),i)}):(this.period==="current_year"||H(this.period))&&this.groupingType==="month"?e.forEach(i=>{n.set(i.monthNumber.toString(),i)}):e.forEach(i=>{let d=new Date(i.start_date).toISOString().split("T")[0];n.set(d,i)}),n}formatDuration(t){let e=Math.round(t*60),n=Math.floor(e/60),i=e%60;return`${n}h${i>0?` ${i}min`:""}`}getMetricValue(t,e){if(!t)return null;if("weekNumber"in t){let n=t;switch(e){case"speed":return n.averageSpeed;case"distance":return n.totalDistance;case"elevation":return n.totalElevation;case"duration":return n.totalDuration/3600;default:return null}}else if("monthNumber"in t){let n=t;switch(e){case"speed":return n.averageSpeed;case"distance":return n.totalDistance;case"elevation":return n.totalElevation;case"duration":return n.totalDuration/3600;default:return null}}else{let n=t;switch(e){case"speed":return n.average_speed;case"distance":return n.distance;case"elevation":return n.total_elevation_gain;case"duration":return n.elapsed_time/3600;default:return null}}}handleLegendClick(t,e){let n=e.datasetIndex;n!==void 0&&n>=0&&n<this.selectedMetrics.length&&this.toggleMetric(this.selectedMetrics[n])}updateChart(){this.chart&&this.chart.destroy();let t=document.getElementById("activityChart");if(!t)return;let[e,n]=this.generateDateLabels(),i=this.createDataMap(e,n),l=this.selectedMetrics.map(f=>{let x=this.metrics.find(C=>C.value===f),O=e.map(C=>{if(!C)return null;if((this.period==="current_year"||H(this.period))&&this.groupingType==="week"){let T=this.getWeekNumber(C),L=i.get(T.toString());return this.getMetricValue(L,f)}else if((this.period==="current_year"||H(this.period))&&this.groupingType==="month"){let T=C.getMonth(),L=i.get(T.toString());return this.getMetricValue(L,f)}else{let T=C.toISOString().split("T")[0],L=i.get(T);return this.getMetricValue(L,f)}});return{label:this.getMetricLabel(x),data:O,borderColor:x.color,backgroundColor:`${x.color}33`,borderWidth:2,tension:.1,fill:!1,yAxisID:f,spanGaps:!0,pointRadius:O.map(C=>C===null?0:3)}}),d=this.getLocale(),u=this.translateService.instant("chart.week_abbrev"),g={labels:e.map(f=>{if(!f)return"";if((this.period==="current_year"||H(this.period))&&this.groupingType==="week"){let x=this.getWeekNumber(f);return`${u} ${x}`}return(this.period==="current_year"||H(this.period))&&this.groupingType==="month"?f.toLocaleDateString(d,{month:"short"}):f.toLocaleDateString(d,{month:"short",day:"numeric"})}),datasets:l},h={x:{type:"category",grid:{color:"rgba(0, 0, 0, 0.05)"}}};this.selectedMetrics.forEach((f,x)=>{let O=this.metrics.find(C=>C.value===f);h[f]={type:"linear",display:!0,position:x%2===0?"left":"right",grid:{color:`${O.color}22`},title:{display:!0,text:this.getMetricLabel(O)},beginAtZero:!0}});let b=(f,x)=>{if((this.period==="current_year"||H(this.period))&&this.groupingType==="week"){let O=this.getWeekNumber(f),C=x.get(O.toString());if(!C)return"";let T=this.translateService.instant("chart.week"),L=this.translateService.instant("chart.from"),Q=this.translateService.instant("chart.to"),te=this.translateService.instant("chart.activities_of_week"),B=`${T} ${C.weekNumber}
`;return B+=`${L} ${C.weekStart.toLocaleDateString(d)} ${Q} ${C.weekEnd.toLocaleDateString(d)}

`,B+=`${te}:
`,C.activities.forEach(q=>{B+=`- ${q.date.toLocaleDateString(d)}: ${q.name}
`}),B}else if((this.period==="current_year"||H(this.period))&&this.groupingType==="month"){let O=f.getMonth(),C=x.get(O.toString());if(!C)return"";let T=this.translateService.instant("chart.from"),L=this.translateService.instant("chart.to"),Q=this.translateService.instant("chart.activities_of_month"),te=`${C.monthLabel.charAt(0).toUpperCase()+C.monthLabel.slice(1)}
`;return te+=`${T} ${C.monthStart.toLocaleDateString(d)} ${L} ${C.monthEnd.toLocaleDateString(d)}

`,te+=`${Q}:
`,C.activities.forEach(B=>{te+=`- ${B.date.toLocaleDateString(d)}: ${B.name}
`}),te}else{let O=f.toISOString().split("T")[0],C=x.get(O);return C?`${f.toLocaleDateString(d,{weekday:"long",day:"numeric",month:"long"})}
${C.name}`:""}};this.chart=new ve(t,{type:"line",data:g,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",onClick:(f,x)=>this.handleLegendClick(f,x)},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(255, 255, 255, 0.9)",titleColor:"#000",bodyColor:"#666",borderColor:"#ddd",borderWidth:1,callbacks:{title:f=>{let x=f[0].dataIndex;return e[x]?b(e[x],i):""},label:f=>{let x=f.raw;return f.dataset.yAxisID==="duration"?`${f.dataset.label}: ${this.formatDuration(x)}`:`${f.dataset.label}: ${x.toFixed(1)}`}}},zoom:{pan:{enabled:!0,mode:"x",modifierKey:"ctrl"},zoom:{wheel:{enabled:!0,modifierKey:"ctrl"},pinch:{enabled:!0},mode:"x"},limits:{x:{min:"original",max:"original"}}}},scales:h}})}static \u0275fac=function(e){return new(e||a)(I(he),I($))};static \u0275cmp=E({type:a,selectors:[["app-modern-activity-chart"]],viewQuery:function(e,n){if(e&1&&re(en,5),e&2){let i;oe(i=se())&&(n.chartContainer=i.first)}},inputs:{activities:"activities",period:"period"},standalone:!0,features:[ie,A],decls:35,vars:20,consts:[["chartContainer",""],[1,"card"],[1,"card-header"],[1,"header-main"],[1,"card-title"],[1,"primary-controls"],[1,"select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","grouping-control",4,"ngIf"],[1,"metrics-toggles"],["class","metric-toggle",3,"active","--metric-color","click",4,"ngFor","ngForOf"],[1,"zoom-controls"],[1,"zoom-button",3,"click"],[1,"zoom-icon"],[1,"card-content"],[1,"chart-container"],[1,"fullscreen-button",3,"click"],["viewBox","0 0 24 24",1,"fullscreen-icon"],["d","M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z",4,"ngIf"],["d","M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z",4,"ngIf"],["id","activityChart"],[3,"value"],[1,"grouping-control"],[1,"grouping-options"],[1,"grouping-label"],["type","radio","name","grouping","value","none",3,"change","checked"],["type","radio","name","grouping","value","week",3,"change","checked"],["type","radio","name","grouping","value","month",3,"change","checked"],[1,"metric-toggle",3,"click"],["d","M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"],["d","M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"]],template:function(e,n){if(e&1){let i=G();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),c(4),m(5,"translate"),s(),o(6,"div",5)(7,"select",6),ke("ngModelChange",function(d){return P(i),we(n.selectedActivityType,d)||(n.selectedActivityType=d),D(d)}),k("ngModelChange",function(d){return P(i),D(n.onActivityTypeChange(d))}),w(8,tn,2,2,"option",7),s(),w(9,nn,14,12,"div",8),o(10,"div",9),w(11,an,2,5,"button",10),s()()(),o(12,"div",11)(13,"button",12),k("click",function(){return P(i),D(n.resetZoom())}),o(14,"span",13),c(15,"\u{1F504}"),s()(),o(16,"button",12),k("click",function(){return P(i),D(n.zoomIn())}),o(17,"span",13),c(18,"+"),s()(),o(19,"button",12),k("click",function(){return P(i),D(n.zoomOut())}),o(20,"span",13),c(21,"-"),s()()()(),o(22,"div",14)(23,"div",15,0)(25,"button",16),m(26,"async"),m(27,"translate"),m(28,"translate"),k("click",function(){return P(i),D(n.toggleFullscreen())}),V(),o(29,"svg",17),w(30,rn,1,0,"path",18),m(31,"async"),w(32,on,1,0,"path",19),m(33,"async"),s()(),R(),M(34,"canvas",20),s()()()}e&2&&(r(4),y(v(5,8,"chart.performance_evolution")),r(3),Me("ngModel",n.selectedActivityType),r(),p("ngForOf",n.activityTypes),r(),p("ngIf",n.isYearOrCurrentYear()),r(2),p("ngForOf",n.metrics),r(14),Ce("aria-label",v(26,10,n.isFullscreen$)?v(27,12,"chart.exit_fullscreen"):v(28,14,"chart.enter_fullscreen")),r(5),p("ngIf",!v(31,16,n.isFullscreen$)),r(2),p("ngIf",v(33,18,n.isFullscreen$)))},dependencies:[F,Y,z,De,Ie,ge,ue,me,pe,Oe,j,N],styles:[".card[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);margin:1rem 0;transition:box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md)}.card-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid var(--gray-200);display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:1rem}.header-main[_ngcontent-%COMP%]{flex:1;min-width:300px}.card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-primary);margin:0}.filters[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid var(--gray-300);border-radius:var(--radius-sm);background-color:var(--bg-primary);color:var(--text-primary);font-size:.875rem;cursor:pointer;transition:all .2s ease;min-width:120px}.select[_ngcontent-%COMP%]:hover{border-color:var(--primary-500)}.select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-500);box-shadow:0 0 0 2px #2196f31a}.metrics-toggles[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.metric-toggle[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--gray-300);border-radius:6px;background:var(--bg-primary);color:var(--text-secondary);cursor:pointer;transition:all .2s;font-size:.875rem}.metric-toggle[_ngcontent-%COMP%]:hover{background:var(--gray-100);color:#fff}.metric-toggle.active[_ngcontent-%COMP%]{background:var(--primary-500);color:var(--bg-primary);border-color:var(--primary-600)}.card-content[_ngcontent-%COMP%]{padding:1.5rem;background:var(--bg-primary)}.chart-container[_ngcontent-%COMP%]{position:relative;height:400px}.fullscreen-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;z-index:10;background:var(--bg-primary);border:1px solid var(--gray-200);border-radius:var(--radius-md);padding:.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.fullscreen-button[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);transform:scale(1.1)}.fullscreen-icon[_ngcontent-%COMP%]{width:20px;height:20px;fill:var(--text-primary)}[_ngcontent-%COMP%]:fullscreen   .chart-container[_ngcontent-%COMP%]{height:100vh;width:100vw;display:flex;align-items:center;justify-content:center;background-color:var(--bg-primary)}[_ngcontent-%COMP%]:fullscreen   canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important;max-height:100vh}@media screen and (orientation: landscape){[_ngcontent-%COMP%]:fullscreen   canvas[_ngcontent-%COMP%]{width:auto!important;height:100%!important}}.primary-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;flex-wrap:wrap;margin-top:1rem}.zoom-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.zoom-button[_ngcontent-%COMP%]{width:36px;height:36px;padding:0;border:1px solid var(--gray-300);border-radius:var(--radius-sm);background:var(--bg-primary);color:var(--text-primary);cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center}.zoom-button[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);border-color:var(--primary-500);color:var(--primary-500)}.zoom-icon[_ngcontent-%COMP%]{font-size:1rem;line-height:1}@media (max-width: 768px){.card-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.zoom-controls[_ngcontent-%COMP%]{justify-content:flex-end}}@media (max-width: 768px){.card-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.filters[_ngcontent-%COMP%]{width:100%;flex-direction:column}.select[_ngcontent-%COMP%]{width:100%}.metrics-toggles[_ngcontent-%COMP%]{width:100%;justify-content:center}}.grouping-control[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 1rem}.grouping-options[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.grouping-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:var(--text-secondary);cursor:pointer;transition:color .2s}.grouping-label[_ngcontent-%COMP%]:hover{color:var(--text-primary)}.grouping-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:1rem;height:1rem;accent-color:var(--primary-500);cursor:pointer}@media (max-width: 768px){.grouping-control[_ngcontent-%COMP%]{width:100%;margin:.5rem 0}.grouping-options[_ngcontent-%COMP%]{width:100%;flex-direction:row;gap:.5rem;justify-content:space-around}.grouping-label[_ngcontent-%COMP%]{font-size:.8rem;white-space:nowrap}.primary-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;width:100%}.primary-controls[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}}"]})};var sn=["chartContainer"];function ln(a,t){if(a&1&&(o(0,"option",17),c(1),s()),a&2){let e=t.$implicit;p("value",e),r(),S(" ",e," ")}}function cn(a,t){a&1&&(V(),M(0,"path",18))}function dn(a,t){a&1&&(V(),M(0,"path",19))}ve.register(Be,Le,Pt,Fe,Ae,Ge,ze,Ve,Re);var Ye=class a{constructor(t){this.fullscreenService=t;this.isFullscreen$=this.fullscreenService.isFullscreen$}activities=[];selectedActivityType="Run";chart=null;activityTypes=["Run","Ride","Walk/Hike"];chartContainer;isFullscreen$;toggleFullscreen(){this.chartContainer&&this.fullscreenService.toggleFullscreen(this.chartContainer.nativeElement)}ngOnChanges(t){t.activities&&this.activities&&this.updateChart()}onActivityTypeChange(t){this.selectedActivityType=t,this.updateChart()}zoomIn(){this.chart&&this.chart.zoom(1.2)}zoomOut(){this.chart&&this.chart.zoom(.8)}resetZoom(){this.chart&&this.chart.resetZoom()}roundDistance(t){return Math.round(t*10)/10}getFilteredActivities(){if(!this.activities)return[];let t=[...this.activities];switch(this.selectedActivityType){case"Run":t=t.filter(e=>e.type.includes("Run"));break;case"Ride":t=t.filter(e=>e.type.includes("Ride"));break;case"Walk/Hike":t=t.filter(e=>e.type.includes("Hike")||e.type.includes("Walk"));break}return t.sort((e,n)=>new Date(e.start_date).getTime()-new Date(n.start_date).getTime())}convertSpeedToPace(t){return 60/t}formatPace(t){let e=Math.floor(t),n=Math.round((t-e)*60);return`${e}'${n.toString().padStart(2,"0")}"`}calculateTrendLine(t){let e=t.length;if(e<2)return{slope:0,intercept:0};let n=0,i=0,l=0,d=0;t.forEach(h=>{n+=h.x,i+=h.y,l+=h.x*h.y,d+=h.x*h.x});let u=(e*l-n*i)/(e*d-n*n),g=(i-u*n)/e;return{slope:u,intercept:g}}generateTrendLineData(t){if(t.length<2)return[];let{slope:e,intercept:n}=this.calculateTrendLine(t),i=Math.min(...t.map(d=>d.x)),l=Math.max(...t.map(d=>d.x));return[{x:i,y:e*i+n,date:new Date,name:"Trend"},{x:l,y:e*l+n,date:new Date,name:"Trend"}]}updateChart(){let t=document.getElementById("paceScatterChart");if(!t)return;this.chart&&this.chart.destroy();let n=this.getFilteredActivities().map(g=>({x:this.roundDistance(g.distance),y:this.selectedActivityType==="Ride"?g.average_speed:this.convertSpeedToPace(g.average_speed),date:new Date(g.start_date),name:g.name})),i=this.generateTrendLineData(n),l=this.selectedActivityType==="Ride"?"Vitesse (km/h)":"Allure (min/km)",d=0,u=Math.max(...n.map(g=>g.x))+1;this.chart=new ve(t,{type:"scatter",data:{datasets:[{label:this.selectedActivityType,data:n,backgroundColor:"rgba(33, 150, 243, 0.6)",borderColor:"rgba(33, 150, 243, 1)",borderWidth:1,pointRadius:4,pointHoverRadius:6},{label:"Tendance",data:i,type:"line",borderColor:"rgba(255, 99, 132, 0.8)",borderWidth:2,pointRadius:0,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Distance (km)"},min:d,max:u},y:{title:{display:!0,text:l},reverse:this.selectedActivityType==="Ride",ticks:{callback:g=>this.selectedActivityType==="Ride"?`${g} km/h`:g%1===0?this.formatPace(Number(g)):""}}},plugins:{tooltip:{enabled:!0,callbacks:{label:g=>{if(g.datasetIndex===1)return"";let h=n[g.dataIndex],b=`${h.name}
`;return b+=`Distance: ${h.x.toFixed(1)} km
`,this.selectedActivityType==="Ride"?b+=`Vitesse: ${h.y.toFixed(1)} km/h`:b+=`Allure: ${this.formatPace(h.y)}/km`,b+=`
Date: ${h.date.toLocaleDateString()}`,b}}},zoom:{pan:{enabled:!0,mode:"xy"},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"xy"}}}}})}static \u0275fac=function(e){return new(e||a)(I(he))};static \u0275cmp=E({type:a,selectors:[["app-pace-scatter"]],viewQuery:function(e,n){if(e&1&&re(sn,5),e&2){let i;oe(i=se())&&(n.chartContainer=i.first)}},inputs:{activities:"activities"},standalone:!0,features:[ie,A],decls:28,vars:11,consts:[["chartContainer",""],[1,"scatter-card"],[1,"card-header"],[1,"header-main"],[1,"card-title"],[1,"controls"],[1,"select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"zoom-controls"],[1,"zoom-button",3,"click"],[1,"zoom-icon"],[1,"chart-container"],[1,"fullscreen-button",3,"click"],["viewBox","0 0 24 24",1,"fullscreen-icon"],["d","M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z",4,"ngIf"],["d","M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z",4,"ngIf"],["id","paceScatterChart"],[3,"value"],["d","M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"],["d","M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"]],template:function(e,n){if(e&1){let i=G();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),c(4,"Distance vs Allure"),s(),o(5,"div",5)(6,"select",6),ke("ngModelChange",function(d){return P(i),we(n.selectedActivityType,d)||(n.selectedActivityType=d),D(d)}),k("ngModelChange",function(d){return P(i),D(n.onActivityTypeChange(d))}),w(7,ln,2,2,"option",7),s(),o(8,"div",8)(9,"button",9),k("click",function(){return P(i),D(n.resetZoom())}),o(10,"span",10),c(11,"\u{1F504}"),s()(),o(12,"button",9),k("click",function(){return P(i),D(n.zoomIn())}),o(13,"span",10),c(14,"+"),s()(),o(15,"button",9),k("click",function(){return P(i),D(n.zoomOut())}),o(16,"span",10),c(17,"-"),s()()()()()(),o(18,"div",11,0)(20,"button",12),m(21,"async"),k("click",function(){return P(i),D(n.toggleFullscreen())}),V(),o(22,"svg",13),w(23,cn,1,0,"path",14),m(24,"async"),w(25,dn,1,0,"path",15),m(26,"async"),s()(),R(),M(27,"canvas",16),s()()}e&2&&(r(6),Me("ngModel",n.selectedActivityType),r(),p("ngForOf",n.activityTypes),r(13),Ce("aria-label",v(21,5,n.isFullscreen$)?"Quitter le plein \xE9cran":"Passer en plein \xE9cran"),r(3),p("ngIf",!v(24,7,n.isFullscreen$)),r(2),p("ngIf",v(26,9,n.isFullscreen$)))},dependencies:[F,Y,z,De,Ie,ge,ue,me,pe,Oe],styles:[".scatter-card[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);margin:1rem 0;transition:box-shadow .3s ease}.scatter-card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md)}.card-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid var(--gray-200)}.header-main[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-primary);margin:0}.controls[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid var(--gray-300);border-radius:var(--radius-sm);background-color:var(--bg-primary);color:var(--text-primary);font-size:.875rem;cursor:pointer;transition:all .2s ease;min-width:120px}.select[_ngcontent-%COMP%]:hover{border-color:var(--primary-500)}.select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-500);box-shadow:0 0 0 2px #2196f31a}.zoom-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.zoom-button[_ngcontent-%COMP%]{width:36px;height:36px;padding:0;border:1px solid var(--gray-300);border-radius:var(--radius-sm);background:var(--bg-primary);color:var(--text-primary);cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center}.zoom-button[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);border-color:var(--primary-500);color:var(--primary-500)}.zoom-icon[_ngcontent-%COMP%]{font-size:1rem;line-height:1}.chart-container[_ngcontent-%COMP%]{position:relative;height:400px}.fullscreen-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;z-index:10;background:var(--bg-primary);border:1px solid var(--gray-200);border-radius:var(--radius-md);padding:.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.fullscreen-button[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);transform:scale(1.1)}.fullscreen-icon[_ngcontent-%COMP%]{width:20px;height:20px;fill:var(--text-primary)}[_ngcontent-%COMP%]:fullscreen   .chart-container[_ngcontent-%COMP%]{height:100vh;width:100vw;display:flex;align-items:center;justify-content:center;background-color:var(--bg-primary)}[_ngcontent-%COMP%]:fullscreen   canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important;max-height:100vh}@media screen and (orientation: landscape){[_ngcontent-%COMP%]:fullscreen   canvas[_ngcontent-%COMP%]{width:auto!important;height:100%!important}}@media (max-width: 768px){.header-main[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.controls[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.zoom-controls[_ngcontent-%COMP%]{justify-content:flex-end}.select[_ngcontent-%COMP%]{width:100%}}"]})};function pn(a,t){if(a&1&&(o(0,"div",13),c(1),s()),a&2){let e=_(2);r(),S(" ",e.formatDateRange(e.streakInfo==null?null:e.streakInfo.currentStreakStart,e.streakInfo==null?null:e.streakInfo.currentStreakEnd)," ")}}function mn(a,t){a&1&&(o(0,"div",14),c(1),m(2,"translate"),s()),a&2&&(r(),S(" ",v(2,1,"streaks.start_today")," "))}function gn(a,t){if(a&1&&(o(0,"div",4)(1,"div",5),c(2,"\u{1F525}"),s(),o(3,"div",6)(4,"div",7),c(5),m(6,"translate"),s(),o(7,"div",8)(8,"span",9),c(9),s(),o(10,"span",10),c(11),s()(),w(12,pn,2,1,"div",11)(13,mn,3,3,"div",12),s()()),a&2){let e=_();r(5),y(v(6,5,"streaks.current_streak")),r(4),y((e.streakInfo==null?null:e.streakInfo.currentStreak)||0),r(2),y(e.getUnitLabel((e.streakInfo==null?null:e.streakInfo.currentStreak)||0)),r(),p("ngIf",e.hasCurrentStreak),r(),p("ngIf",!e.hasCurrentStreak)}}function un(a,t){if(a&1&&(o(0,"div",13),c(1),s()),a&2){let e=_(2);r(),S(" ",e.formatDateRange(e.streakInfo==null?null:e.streakInfo.longestStreakStart,e.streakInfo==null?null:e.streakInfo.longestStreakEnd)," ")}}function vn(a,t){a&1&&(o(0,"div",14),c(1),m(2,"translate"),s()),a&2&&(r(),S(" ",v(2,1,"streaks.no_activity")," "))}function fn(a,t){if(a&1&&(o(0,"div",15)(1,"div",5),c(2,"\u{1F3C6}"),s(),o(3,"div",6)(4,"div",7),c(5),m(6,"translate"),s(),o(7,"div",8)(8,"span",9),c(9),s(),o(10,"span",10),c(11),s()(),w(12,un,2,1,"div",11)(13,vn,3,3,"div",12),s()()),a&2){let e=_();r(5),y(v(6,5,"streaks.best_streak")),r(4),y((e.streakInfo==null?null:e.streakInfo.longestStreak)||0),r(2),y(e.getUnitLabel((e.streakInfo==null?null:e.streakInfo.longestStreak)||0)),r(),p("ngIf",e.hasLongestStreak),r(),p("ngIf",!e.hasLongestStreak)}}function hn(a,t){a&1&&(o(0,"div",16),M(1,"div",17),s())}var Ue=class a{constructor(t){this.translateService=t}streakInfo=null;loading=!1;streakMode="weeks";showLongestStreak=!0;get hasCurrentStreak(){return!!this.streakInfo&&this.streakInfo.currentStreak>0}get hasLongestStreak(){return!!this.streakInfo&&this.streakInfo.longestStreak>0}formatDateRange(t,e){return!t||!e?"":t.getTime()===e.getTime()?this.formatDate(t):`${this.formatDate(t)} - ${this.formatDate(e)}`}formatDate(t){let e=this.translateService.currentLang==="en"?"en-US":"fr-FR",n={month:"short",day:"numeric",year:t.getFullYear()!==new Date().getFullYear()?"numeric":void 0};return t.toLocaleDateString(e,n)}getUnitLabel(t){if(this.streakMode==="weeks"){let e=t===1?"common.plurals.week_one":"common.plurals.week_other";return this.translateService.instant(e)}else{let e=t===1?"common.plurals.day_one":"common.plurals.day_other";return this.translateService.instant(e)}}static \u0275fac=function(e){return new(e||a)(I($))};static \u0275cmp=E({type:a,selectors:[["app-streak-badge"]],inputs:{streakInfo:"streakInfo",loading:"loading",streakMode:"streakMode",showLongestStreak:"showLongestStreak"},standalone:!0,features:[A],decls:4,vars:3,consts:[[1,"streak-container"],["class","streak-card current-streak",4,"ngIf"],["class","streak-card longest-streak",4,"ngIf"],["class","streak-loading",4,"ngIf"],[1,"streak-card","current-streak"],[1,"streak-icon"],[1,"streak-content"],[1,"streak-label"],[1,"streak-value"],[1,"streak-number"],[1,"streak-unit"],["class","streak-date",4,"ngIf"],["class","streak-empty",4,"ngIf"],[1,"streak-date"],[1,"streak-empty"],[1,"streak-card","longest-streak"],[1,"streak-loading"],[1,"loading-spinner"]],template:function(e,n){e&1&&(o(0,"div",0),w(1,gn,14,7,"div",1)(2,fn,14,7,"div",2)(3,hn,2,0,"div",3),s()),e&2&&(r(),p("ngIf",!n.loading),r(),p("ngIf",!n.loading&&n.showLongestStreak),r(),p("ngIf",n.loading))},dependencies:[F,z,j,N],styles:[".streak-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;width:100%}.streak-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--gray-200);border-radius:var(--radius-md);box-shadow:var(--shadow-sm);padding:1.5rem;display:flex;align-items:center;gap:1rem;transition:transform .3s,box-shadow .3s}.streak-card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md);transform:translateY(-2px)}.streak-card.current-streak[_ngcontent-%COMP%]{border-left:4px solid var(--orange-500)}.streak-card.longest-streak[_ngcontent-%COMP%]{border-left:4px solid var(--yellow-500)}.streak-icon[_ngcontent-%COMP%]{font-size:2.5rem;line-height:1;flex-shrink:0}.streak-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.streak-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.streak-value[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.5rem}.streak-number[_ngcontent-%COMP%]{color:var(--primary-500);font-size:2rem;font-weight:700;line-height:1;font-variant-numeric:tabular-nums}.streak-unit[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;font-weight:500}.streak-date[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:.75rem;margin-top:.25rem}.streak-empty[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:.75rem;font-style:italic;margin-top:.25rem}.streak-loading[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;justify-content:center;align-items:center;padding:2rem}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--gray-200);border-top:3px solid var(--primary-500);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.streak-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.streak-card[_ngcontent-%COMP%]{padding:1rem}.streak-icon[_ngcontent-%COMP%]{font-size:2rem}.streak-number[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};var _n=(a,t)=>({value:a,percentage:t});function yn(a,t){if(a&1){let e=G();o(0,"div",24)(1,"button",25),m(2,"translate"),k("click",function(){P(e);let i=_(2);return D(i.onEdit())}),V(),o(3,"svg",26),M(4,"path",27),s()(),R(),o(5,"button",28),m(6,"translate"),k("click",function(){P(e);let i=_(2);return D(i.onDelete())}),V(),o(7,"svg",26),M(8,"path",29),s()()()}a&2&&(r(),p("title",v(2,2,"goals.card.edit")),r(4),p("title",v(6,4,"goals.card.delete")))}function bn(a,t){if(a&1&&(o(0,"span"),c(1),m(2,"translate"),s()),a&2){let e=_(2);r(),S(" ",Z(2,1,"goals.card.at_this_pace",rt(4,_n,e.formatValue(e.progress.projection,e.progress.goal.type),e.progress.projectionPercentage.toFixed(0)))," ")}}function Cn(a,t){a&1&&(o(0,"span",30),c(1),m(2,"translate"),s()),a&2&&(r(),S(" ",v(2,1,"goals.card.goal_achieved")," "))}function xn(a,t){if(a&1&&(o(0,"span"),c(1),m(2,"translate"),m(3,"translate"),s()),a&2){let e=_(2);r(),Je(" ",e.progress.daysRemaining," ",v(2,3,"common.plurals.day_other")," ",v(3,5,"common.plurals.remaining_other")," ")}}function Sn(a,t){if(a&1&&(o(0,"span"),c(1),m(2,"translate"),m(3,"translate"),s()),a&2){let e=_(2);r(),Je(" ",e.progress.daysRemaining," ",v(2,3,"common.plurals.day_one")," ",v(3,5,"common.plurals.remaining_one")," ")}}function Mn(a,t){a&1&&(o(0,"span"),c(1),m(2,"translate"),s()),a&2&&(r(),S(" ",v(2,1,"goals.card.last_day")," "))}function wn(a,t){if(a&1&&(o(0,"div",2)(1,"div",3)(2,"div",4)(3,"span",5),c(4),s(),o(5,"div",6)(6,"h3",7),c(7),s(),o(8,"p",8),c(9),s()()(),w(10,yn,9,6,"div",9),s(),o(11,"div",10)(12,"div",11)(13,"span",12),c(14),m(15,"translate"),s(),o(16,"span",13),c(17),s()(),o(18,"div",11)(19,"span",12),c(20),m(21,"translate"),s(),o(22,"span",13),c(23),s()()(),o(24,"div",14)(25,"div",15),M(26,"div",16),s()(),o(27,"div",17)(28,"div",18),V(),o(29,"svg",19),M(30,"path",20),s(),w(31,bn,3,7,"span",21)(32,Cn,3,3,"span",22),s(),R(),o(33,"div",23),w(34,xn,4,7,"span",21)(35,Sn,4,7,"span",21)(36,Mn,3,3,"span",21),s()()()),a&2){let e=_();r(4),y(e.statusIcon),r(3),y(e.progress.goal.name),r(2),y(e.getPeriodLabel(e.progress.goal.period)),r(),p("ngIf",e.showActions),r(4),y(v(15,20,"goals.card.progression")),r(3),Se(" ",e.formatValue(e.progress.current,e.progress.goal.type)," / ",e.formatValue(e.progress.goal.target,e.progress.goal.type)," "),r(3),y(v(21,22,"goals.card.completed")),r(3),S("",e.progress.percentage.toFixed(1),"%"),r(3),le("width",e.progress.percentage,"%")("background-color",e.progressBarColor),r(2),le("color",e.projectionColor),r(3),p("ngIf",!e.progress.isCompleted),r(),p("ngIf",e.progress.isCompleted),r(2),p("ngIf",e.progress.daysRemaining>1),r(),p("ngIf",e.progress.daysRemaining===1),r(),p("ngIf",e.progress.daysRemaining===0)}}function kn(a,t){a&1&&(o(0,"div",31)(1,"p"),c(2),m(3,"translate"),s()()),a&2&&(r(2),y(v(3,1,"dashboard.goals.none")))}var Qe=class a{constructor(t){this.translateService=t}progress=null;showActions=!0;edit=new ae;delete=new ae;get progressBarColor(){return this.progress?this.progress.isCompleted?"var(--green-500)":this.progress.isOnTrack?"var(--primary-500)":"var(--orange-500)":"var(--gray-300)"}get projectionColor(){return this.progress?this.progress.isOnTrack?"var(--green-600)":"var(--orange-600)":"var(--text-secondary)"}get statusIcon(){return this.progress?this.progress.isCompleted?"\u2705":this.progress.isOnTrack?"\u{1F4C8}":"\u26A0\uFE0F":"\u{1F3AF}"}formatValue(t,e){let n=Math.floor(t);switch(e){case"distance":return`${t.toFixed(1)} km`;case"time":let i=Math.floor(t/3600),l=Math.floor(t%3600/60);return`${i}h ${l}min`;case"count":let d=n===1?this.translateService.instant("common.plurals.activity_one"):this.translateService.instant("common.plurals.activity_other");return`${n} ${d}`;default:return t.toFixed(1)}}getPeriodLabel(t){let e=`goals.periods.${t}`;return this.translateService.instant(e)}onEdit(){this.progress&&this.edit.emit(this.progress.goal.id)}onDelete(){if(this.progress){let t=this.translateService.instant("goals.card.delete_confirmation");confirm(t)&&this.delete.emit(this.progress.goal.id)}}static \u0275fac=function(e){return new(e||a)(I($))};static \u0275cmp=E({type:a,selectors:[["app-goal-card"]],inputs:{progress:"progress",showActions:"showActions"},outputs:{edit:"edit",delete:"delete"},standalone:!0,features:[A],decls:2,vars:2,consts:[["class","goal-card",4,"ngIf"],["class","goal-card-empty",4,"ngIf"],[1,"goal-card"],[1,"goal-header"],[1,"goal-title-section"],[1,"goal-icon"],[1,"goal-info"],[1,"goal-name"],[1,"goal-period"],["class","goal-actions",4,"ngIf"],[1,"goal-stats"],[1,"stat"],[1,"stat-label"],[1,"stat-value"],[1,"progress-bar-container"],[1,"progress-bar-bg"],[1,"progress-bar-fill"],[1,"goal-projection"],[1,"projection-text"],["viewBox","0 0 24 24","width","16","height","16",1,"projection-icon"],["fill","currentColor","d","M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"],[4,"ngIf"],["class","completed-text",4,"ngIf"],[1,"days-remaining"],[1,"goal-actions"],[1,"action-btn","edit-btn",3,"click","title"],["viewBox","0 0 24 24","width","16","height","16"],["fill","currentColor","d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"],[1,"action-btn","delete-btn",3,"click","title"],["fill","currentColor","d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"],[1,"completed-text"],[1,"goal-card-empty"]],template:function(e,n){e&1&&w(0,wn,37,24,"div",0)(1,kn,4,3,"div",1),e&2&&(p("ngIf",n.progress),r(),p("ngIf",!n.progress))},dependencies:[F,z,j,N],styles:['.goal-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--gray-200);border-radius:var(--radius-md);box-shadow:var(--shadow-sm);padding:1.5rem;transition:transform .2s,box-shadow .2s}.goal-card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md);transform:translateY(-2px)}.goal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.25rem}.goal-title-section[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;flex:1}.goal-icon[_ngcontent-%COMP%]{font-size:1.5rem;line-height:1;flex-shrink:0}.goal-info[_ngcontent-%COMP%]{flex:1;min-width:0}.goal-name[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.125rem;font-weight:600;margin:0 0 .25rem}.goal-period[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;margin:0}.goal-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-shrink:0}.action-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--gray-300);border-radius:var(--radius-sm);padding:.5rem;cursor:pointer;color:var(--text-secondary);transition:all .2s;display:flex;align-items:center;justify-content:center}.action-btn[_ngcontent-%COMP%]:hover{background:var(--gray-100);border-color:var(--gray-400);color:var(--text-primary)}.edit-btn[_ngcontent-%COMP%]:hover{border-color:var(--primary-500);color:var(--primary-500)}.delete-btn[_ngcontent-%COMP%]:hover{border-color:var(--orange-500);color:var(--orange-500)}.goal-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-bottom:1rem}.stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.stat-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.75rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-value[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.125rem;font-weight:600;font-variant-numeric:tabular-nums}.progress-bar-container[_ngcontent-%COMP%]{margin-bottom:1rem}.progress-bar-bg[_ngcontent-%COMP%]{background:var(--gray-200);border-radius:var(--radius-sm);height:12px;overflow:hidden;position:relative}.progress-bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:var(--radius-sm);transition:width .5s ease,background-color .3s ease;position:relative}.progress-bar-fill[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);animation:_ngcontent-%COMP%_shimmer 2s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.goal-projection[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:1rem;border-top:1px solid var(--gray-200);gap:1rem}.projection-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;font-weight:500;flex:1}.projection-icon[_ngcontent-%COMP%]{flex-shrink:0}.completed-text[_ngcontent-%COMP%]{font-weight:600}.days-remaining[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:.75rem;font-weight:500;white-space:nowrap}.goal-card-empty[_ngcontent-%COMP%]{background:var(--bg-secondary);border:2px dashed var(--gray-300);border-radius:var(--radius-md);padding:2rem;text-align:center;color:var(--text-secondary)}.goal-card-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem}@media (max-width: 768px){.goal-card[_ngcontent-%COMP%]{padding:1rem}.goal-name[_ngcontent-%COMP%]{font-size:1rem}.goal-stats[_ngcontent-%COMP%]{gap:.75rem}.stat-value[_ngcontent-%COMP%]{font-size:1rem}.goal-projection[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.days-remaining[_ngcontent-%COMP%]{align-self:flex-end}}']})};function Pn(a,t){a&1&&(o(0,"div",26),c(1),m(2,"translate"),s()),a&2&&(r(),S(" ",v(2,1,"goals.form.name_error")," "))}function Dn(a,t){if(a&1&&(o(0,"label",27),M(1,"input",28),o(2,"span"),c(3),m(4,"translate"),s()()),a&2){let e=t.$implicit;r(),p("value",e.value),r(2),y(v(4,2,e.labelKey))}}function On(a,t){a&1&&(o(0,"div",26),c(1),m(2,"translate"),s()),a&2&&(r(),S(" ",v(2,1,"goals.form.target_error")," "))}function In(a,t){if(a&1&&(o(0,"option",29),c(1),m(2,"translate"),s()),a&2){let e=t.$implicit;p("value",e.value),r(),S(" ",v(2,2,e.labelKey)," ")}}function Tn(a,t){a&1&&(o(0,"div",30)(1,"div",8)(2,"label",31),c(3),m(4,"translate"),s(),M(5,"input",32),s(),o(6,"div",8)(7,"label",33),c(8),m(9,"translate"),s(),M(10,"input",34),s()()),a&2&&(r(3),y(v(4,2,"goals.form.start_date")),r(5),y(v(9,4,"goals.form.end_date")))}function En(a,t){if(a&1){let e=G();o(0,"button",35),k("click",function(){let i=P(e).$implicit,l=_();return D(l.onSportToggle(i))}),c(1),m(2,"translate"),s()}if(a&2){let e=t.$implicit,n=_();K("selected",n.isSportSelected(e)),r(),S(" ",v(2,3,n.getSportLabelKey(e))," ")}}var qe=class a{constructor(t){this.fb=t}goal=null;availableSports=[];save=new ae;cancel=new ae;goalForm;isEditMode=!1;goalTypes=[{value:"distance",labelKey:"goals.form.type_distance",unitKey:"units.km"},{value:"time",labelKey:"goals.form.type_time",unitKey:"goals.form.target_hours"},{value:"count",labelKey:"goals.form.type_count",unitKey:"goals.form.target_activities"}];periods=[{value:"week",labelKey:"goals.form.period_week"},{value:"month",labelKey:"goals.form.period_month"},{value:"year",labelKey:"goals.form.period_year"},{value:"custom",labelKey:"goals.form.period_custom"}];ngOnInit(){this.isEditMode=!!this.goal,this.initForm()}initForm(){this.goalForm=this.fb.group({name:[this.goal?.name||"",[J.required,J.maxLength(50)]],type:[this.goal?.type||"distance",J.required],target:[this.goal?.target||100,[J.required,J.min(1)]],period:[this.goal?.period||"month",J.required],sportTypes:[this.goal?.sportTypes||[]],startDate:[this.goal?.startDate?this.formatDateForInput(this.goal.startDate):""],endDate:[this.goal?.endDate?this.formatDateForInput(this.goal.endDate):""]}),this.goalForm.get("period")?.valueChanges.subscribe(t=>{t==="custom"?(this.goalForm.get("startDate")?.setValidators(J.required),this.goalForm.get("endDate")?.setValidators(J.required)):(this.goalForm.get("startDate")?.clearValidators(),this.goalForm.get("endDate")?.clearValidators()),this.goalForm.get("startDate")?.updateValueAndValidity(),this.goalForm.get("endDate")?.updateValueAndValidity()})}get selectedType(){return this.goalForm.get("type")?.value}get selectedPeriod(){return this.goalForm.get("period")?.value}get currentUnitKey(){return this.goalTypes.find(e=>e.value===this.selectedType)?.unitKey||""}onSportToggle(t){let e=this.goalForm.get("sportTypes")?.value||[],n=e.indexOf(t);n===-1?e.push(t):e.splice(n,1),this.goalForm.patchValue({sportTypes:e})}isSportSelected(t){return(this.goalForm.get("sportTypes")?.value||[]).includes(t)}getSportLabelKey(t){return Te(t).labelKey}onSubmit(){if(this.goalForm.valid){let t=this.goalForm.value,e={name:t.name,type:t.type,target:t.type==="time"?t.target*3600:t.target,period:t.period,sportTypes:t.sportTypes.length>0?t.sportTypes:void 0};t.period==="custom"&&(e.startDate=new Date(t.startDate),e.endDate=new Date(t.endDate)),this.save.emit(e)}}onCancel(){this.cancel.emit()}onOverlayMouseDown(t){t.target===t.currentTarget&&this.onCancel()}formatDateForInput(t){let e=new Date(t),n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return`${n}-${i}-${l}`}static \u0275fac=function(e){return new(e||a)(I(ft))};static \u0275cmp=E({type:a,selectors:[["app-goal-form"]],inputs:{goal:"goal",availableSports:"availableSports"},outputs:{save:"save",cancel:"cancel"},standalone:!0,features:[A],decls:53,vars:43,consts:[[1,"modal-overlay",3,"mousedown"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],["viewBox","0 0 24 24","width","24","height","24"],["fill","currentColor","d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"],[1,"goal-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-input",3,"placeholder"],["class","error-message",4,"ngIf"],[1,"radio-group"],["class","radio-label",4,"ngFor","ngForOf"],["for","target"],["type","number","id","target","formControlName","target",1,"form-input",3,"min","step"],["for","period"],["id","period","formControlName","period",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["class","custom-dates",4,"ngIf"],[1,"hint"],[1,"sport-chips"],["type","button","class","sport-chip",3,"selected","click",4,"ngFor","ngForOf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"],[1,"radio-label"],["type","radio","formControlName","type",3,"value"],[3,"value"],[1,"custom-dates"],["for","startDate"],["type","date","id","startDate","formControlName","startDate",1,"form-input"],["for","endDate"],["type","date","id","endDate","formControlName","endDate",1,"form-input"],["type","button",1,"sport-chip",3,"click"]],template:function(e,n){if(e&1&&(o(0,"div",0),k("mousedown",function(l){return n.onOverlayMouseDown(l)}),o(1,"div",1)(2,"div",2)(3,"h2",3),c(4),m(5,"translate"),s(),o(6,"button",4),k("click",function(){return n.onCancel()}),V(),o(7,"svg",5),M(8,"path",6),s()()(),R(),o(9,"form",7),k("ngSubmit",function(){return n.onSubmit()}),o(10,"div",8)(11,"label",9),c(12),m(13,"translate"),s(),M(14,"input",10),m(15,"translate"),w(16,Pn,3,3,"div",11),s(),o(17,"div",8)(18,"label"),c(19),m(20,"translate"),s(),o(21,"div",12),w(22,Dn,5,4,"label",13),s()(),o(23,"div",8)(24,"label",14),c(25),m(26,"translate"),m(27,"translate"),s(),M(28,"input",15),w(29,On,3,3,"div",11),s(),o(30,"div",8)(31,"label",16),c(32),m(33,"translate"),s(),o(34,"select",17),w(35,In,3,4,"option",18),s()(),w(36,Tn,11,6,"div",19),o(37,"div",8)(38,"label"),c(39),m(40,"translate"),s(),o(41,"p",20),c(42),m(43,"translate"),s(),o(44,"div",21),w(45,En,3,5,"button",22),s()(),o(46,"div",23)(47,"button",24),k("click",function(){return n.onCancel()}),c(48),m(49,"translate"),s(),o(50,"button",25),c(51),m(52,"translate"),s()()()()()),e&2){let i,l;r(4),y(v(5,21,n.isEditMode?"goals.form.title_edit":"goals.form.title_new")),r(5),p("formGroup",n.goalForm),r(3),y(v(13,23,"goals.form.name_label")),r(2),p("placeholder",v(15,25,"goals.form.name_placeholder")),r(2),p("ngIf",((i=n.goalForm.get("name"))==null?null:i.invalid)&&((i=n.goalForm.get("name"))==null?null:i.touched)),r(3),y(v(20,27,"goals.form.type_label")),r(3),p("ngForOf",n.goalTypes),r(3),Se("",v(26,29,"goals.form.target_label")," (",v(27,31,n.currentUnitKey),")"),r(3),p("min",1)("step",n.selectedType==="distance"?.1:1),r(),p("ngIf",((l=n.goalForm.get("target"))==null?null:l.invalid)&&((l=n.goalForm.get("target"))==null?null:l.touched)),r(3),y(v(33,33,"goals.form.period_label")),r(3),p("ngForOf",n.periods),r(),p("ngIf",n.selectedPeriod==="custom"),r(3),y(v(40,35,"goals.form.sports_label")),r(3),y(v(43,37,"goals.form.sports_placeholder")),r(3),p("ngForOf",n.availableSports),r(3),S(" ",v(49,39,"buttons.cancel")," "),r(2),p("disabled",n.goalForm.invalid),r(),S(" ",v(52,41,n.isEditMode?"goals.form.button_save":"goals.form.button_create")," ")}},dependencies:[F,Y,z,ht,dt,ge,ue,lt,pt,me,mt,pe,ct,vt,gt,ut,j,N],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:var(--radius-lg);box-shadow:var(--shadow-xl);max-width:600px;width:100%;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--gray-200)}.modal-title[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.25rem;font-weight:600;margin:0}.close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-secondary);cursor:pointer;padding:.25rem;display:flex;align-items:center;justify-content:center;border-radius:var(--radius-sm);transition:background-color .2s,color .2s}.close-btn[_ngcontent-%COMP%]:hover{background:var(--gray-100);color:var(--text-primary)}.goal-form[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-primary);font-size:.875rem;font-weight:600}.hint[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:.75rem;margin:-.25rem 0 0}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--gray-300);border-radius:var(--radius-md);padding:.75rem 1rem;font-size:.875rem;color:var(--text-primary);transition:border-color .2s,box-shadow .2s}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-500);box-shadow:0 0 0 3px #2196f31a}.form-input[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary)}.error-message[_ngcontent-%COMP%]{color:var(--orange-600);font-size:.75rem;margin-top:-.25rem}.radio-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}.radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;color:var(--text-secondary);font-weight:500;transition:color .2s}.radio-label[_ngcontent-%COMP%]:hover{color:var(--text-primary)}.radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;accent-color:var(--primary-500)}.custom-dates[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.sport-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.sport-chip[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--gray-300);border-radius:var(--radius-md);padding:.5rem 1rem;font-size:.875rem;color:var(--text-secondary);cursor:pointer;transition:all .2s}.sport-chip[_ngcontent-%COMP%]:hover{border-color:var(--primary-400);color:var(--text-primary)}.sport-chip.selected[_ngcontent-%COMP%]{background:var(--primary-500);border-color:var(--primary-500);color:#fff}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--gray-200)}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:var(--radius-md);font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s;border:none}.btn-secondary[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--gray-300)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--gray-200)}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-500);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-600)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{max-height:95vh}.modal-header[_ngcontent-%COMP%], .goal-form[_ngcontent-%COMP%]{padding:1rem}.modal-title[_ngcontent-%COMP%]{font-size:1.125rem}.custom-dates[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.btn[_ngcontent-%COMP%]{width:100%}}"]})};var Xe=class a{constructor(){}calculateStreaks(t){if(!t||t.length===0)return{currentStreak:0,longestStreak:0};let e=this.groupActivitiesByDate(t),n=Array.from(e.keys()).sort((C,T)=>C-T).map(C=>new Date(C));if(n.length===0)return{currentStreak:0,longestStreak:0};let i=this.getDateWithoutTime(new Date),l=0,d,u,g=new Date(i);for(;;){let C=this.getDateWithoutTime(g).getTime();if(e.has(C))l++,d=new Date(g),u||(u=new Date(g)),g.setDate(g.getDate()-1);else break}let h=0,b,f,x=1,O=n[0];for(let C=1;C<n.length;C++){let T=n[C-1],L=n[C];Math.floor((L.getTime()-T.getTime())/(1e3*60*60*24))===1?x++:(x>h&&(h=x,b=new Date(O),f=new Date(n[C-1])),x=1,O=L)}return x>h&&(h=x,b=new Date(O),f=new Date(n[n.length-1])),l>h&&(h=l,b=d,f=u),{currentStreak:l,longestStreak:h,currentStreakStart:d,currentStreakEnd:u,longestStreakStart:b,longestStreakEnd:f}}generateHeatmapData(t,e=365){let n=this.groupActivitiesByDate(t),i=[],l=new Date;for(let d=e-1;d>=0;d--){let u=new Date(l);u.setDate(u.getDate()-d);let g=this.getDateWithoutTime(u),h=g.getTime(),b=n.get(h)||[];i.push({date:g,count:b.length,activities:b})}return i}generateMonthHeatmapData(t,e,n){let i=this.groupActivitiesByDate(t),l=[],d=new Date(e,n,1),u=new Date(e,n+1,0);for(let g=1;g<=u.getDate();g++){let h=new Date(e,n,g),b=this.getDateWithoutTime(h),f=b.getTime(),x=i.get(f)||[];l.push({date:b,count:x.length,activities:x})}return l}groupActivitiesByDate(t){let e=new Map;return t.forEach(n=>{let l=this.getDateWithoutTime(new Date(n.start_date)).getTime();e.has(l)||e.set(l,[]),e.get(l).push(n)}),e}getDateWithoutTime(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())}hasActivitiesOnDate(t,e){let n=this.getDateWithoutTime(e);return t.some(i=>this.getDateWithoutTime(new Date(i.start_date)).getTime()===n.getTime())}getActivitiesForDate(t,e){let n=this.getDateWithoutTime(e);return t.filter(i=>this.getDateWithoutTime(new Date(i.start_date)).getTime()===n.getTime())}calculateWeekStreaks(t){if(!t||t.length===0)return{currentStreak:0,longestStreak:0};let e=this.groupActivitiesByWeek(t),n=Array.from(e.keys()).sort();if(n.length===0)return{currentStreak:0,longestStreak:0};let i=new Date,l=this.getWeekKey(i),d=0,u,g,h=l;for(;e.has(h);){d++;let T=this.getWeekDates(h);u=T.start,g||(g=T.end),h=this.getPreviousWeekKey(h)}let b=0,f,x,O=1,C=n[0];for(let T=1;T<n.length;T++){let L=n[T-1],Q=n[T];this.areConsecutiveWeeks(L,Q)?O++:(O>b&&(b=O,f=this.getWeekDates(C).start,x=this.getWeekDates(n[T-1]).end),O=1,C=Q)}return O>b&&(b=O,f=this.getWeekDates(C).start,x=this.getWeekDates(n[n.length-1]).end),d>b&&(b=d,f=u,x=g),{currentStreak:d,longestStreak:b,currentStreakStart:u,currentStreakEnd:g,longestStreakStart:f,longestStreakEnd:x}}groupActivitiesByWeek(t){let e=new Map;return t.forEach(n=>{let i=new Date(n.start_date),l=this.getWeekKey(i);e.has(l)||e.set(l,[]),e.get(l).push(n)}),e}getWeekKey(t){let e=t.getFullYear(),n=this.getISOWeekNumber(t),i=new Date(e,0,4);return`${t<i&&n>50?e-1:t>new Date(e,11,28)&&n===1?e+1:e}-W${n.toString().padStart(2,"0")}`}getISOWeekNumber(t){let e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));let n=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-n.getTime())/864e5+1)/7)}getPreviousWeekKey(t){let[e,n]=t.split("-W"),i=parseInt(e),l=parseInt(n);if(l===1){let d=new Date(i-1,11,31);return this.getWeekKey(d)}return`${i}-W${(l-1).toString().padStart(2,"0")}`}areConsecutiveWeeks(t,e){let[n,i]=t.split("-W"),[l,d]=e.split("-W"),u=parseInt(n),g=parseInt(i),h=parseInt(l),b=parseInt(d);if(h===u&&b===g+1)return!0;if(h===u+1&&b===1){let f=new Date(u,11,31),x=this.getISOWeekNumber(f);return g===x||g===52||g===53}return!1}getWeekDates(t){let[e,n]=t.split("-W"),i=parseInt(e),l=parseInt(n),d=new Date(i,0,4),u=d.getDay()||7,g=new Date(d);g.setDate(d.getDate()-u+1);let h=new Date(g);h.setDate(g.getDate()+(l-1)*7);let b=new Date(h);return b.setDate(h.getDate()+6),{start:h,end:b}}static \u0275fac=function(e){return new(e||a)};static \u0275prov=ne({token:a,factory:a.\u0275fac,providedIn:"root"})};var Ze=class a{STORAGE_KEY="strava_goals";goalsSubject=new ye([]);goals$=this.goalsSubject.asObservable();constructor(){this.loadGoals()}loadGoals(){let t=localStorage.getItem(this.STORAGE_KEY);if(t)try{let e=JSON.parse(t);e.forEach(n=>{n.createdAt=new Date(n.createdAt),n.startDate&&(n.startDate=new Date(n.startDate)),n.endDate&&(n.endDate=new Date(n.endDate))}),this.goalsSubject.next(e)}catch(e){console.error("Error loading goals:",e),this.goalsSubject.next([])}}saveGoals(t){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),this.goalsSubject.next(t)}getGoals(){return this.goalsSubject.value}getGoalById(t){return this.goalsSubject.value.find(e=>e.id===t)}createGoal(t){let e=et(X({},t),{id:this.generateId(),createdAt:new Date}),n=[...this.goalsSubject.value,e];return this.saveGoals(n),e}updateGoal(t,e){let n=this.goalsSubject.value,i=n.findIndex(d=>d.id===t);if(i===-1)return;let l=X(X({},n[i]),e);return n[i]=l,this.saveGoals(n),l}deleteGoal(t){let e=this.goalsSubject.value.filter(n=>n.id!==t);return e.length===this.goalsSubject.value.length?!1:(this.saveGoals(e),!0)}calculateProgress(t,e){let{startDate:n,endDate:i}=this.getGoalPeriodDates(t),l=new Date,d=e.filter(B=>{let q=new Date(B.start_date);return q>=n&&q<=i}),u=t.sportTypes&&t.sportTypes.length>0?d.filter(B=>t.sportTypes.includes(B.sport_type||B.type)):d,g=0;switch(t.type){case"distance":g=u.reduce((B,q)=>B+q.distance,0);break;case"time":g=u.reduce((B,q)=>B+q.elapsed_time,0);break;case"count":g=u.length;break}let h=g/t.target*100,b=Math.max(0,t.target-g),f=g>=t.target,x=Math.ceil((i.getTime()-n.getTime())/(1e3*60*60*24)),O=Math.max(1,Math.ceil((l.getTime()-n.getTime())/(1e3*60*60*24))),C=Math.max(0,Math.ceil((i.getTime()-l.getTime())/(1e3*60*60*24))),L=g/O*x,Q=L/t.target*100,te=L>=t.target;return{goal:t,current:g,percentage:Math.min(100,h),remaining:b,projection:L,projectionPercentage:Q,daysRemaining:C,daysElapsed:O,totalDays:x,isOnTrack:te,isCompleted:f}}getGoalPeriodDates(t){let e=new Date,n,i;switch(t.period){case"week":n=new Date(e);let l=n.getDay(),d=n.getDate()-l+(l===0?-6:1);n.setDate(d),n.setHours(0,0,0,0),i=new Date(n),i.setDate(n.getDate()+6),i.setHours(23,59,59,999);break;case"month":n=new Date(e.getFullYear(),e.getMonth(),1,0,0,0,0),i=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59,999);break;case"year":n=new Date(e.getFullYear(),0,1,0,0,0,0),i=new Date(e.getFullYear(),11,31,23,59,59,999);break;case"custom":if(!t.startDate||!t.endDate)throw new Error("Custom period requires startDate and endDate");n=new Date(t.startDate),n.setHours(0,0,0,0),i=new Date(t.endDate),i.setHours(23,59,59,999);break;default:throw new Error(`Unknown goal period: ${t.period}`)}return{startDate:n,endDate:i}}getActiveGoals(){let t=new Date;return this.goalsSubject.value.filter(e=>{let{startDate:n,endDate:i}=this.getGoalPeriodDates(e);return t>=n&&t<=i})}generateId(){return`goal_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(e){return new(e||a)};static \u0275prov=ne({token:a,factory:a.\u0275fac,providedIn:"root"})};function Vn(a,t){a&1&&(o(0,"div",6),M(1,"app-spinner"),o(2,"div",7),c(3),m(4,"translate"),M(5,"br"),o(6,"span",8),c(7),m(8,"translate"),s()()()),a&2&&(r(3),S(" ",v(4,2,"dashboard.loading.all_activities"),""),r(4),y(v(8,4,"dashboard.loading.may_take_time")))}function Gn(a,t){a&1&&(o(0,"div",9),M(1,"app-spinner"),o(2,"div",10),c(3),m(4,"translate"),s()()),a&2&&(r(3),y(v(4,1,"dashboard.loading.activities")))}function zn(a,t){if(a&1){let e=G();o(0,"div",12)(1,"div",13)(2,"p"),c(3),m(4,"translate"),s(),o(5,"button",14),k("click",function(){P(e);let i=_(2);return D(i.reconnectToStrava())}),c(6),m(7,"translate"),s()()()}a&2&&(r(3),y(v(4,2,"errors.session_expired.title")),r(3),S(" ",v(7,4,"errors.session_expired.action")," "))}function Ln(a,t){if(a&1){let e=G();o(0,"div",12)(1,"div",13)(2,"p"),c(3),s(),o(4,"button",14),k("click",function(){P(e);let i=_(2);return D(i.loadData())}),c(5),m(6,"translate"),s()()()}if(a&2){let e=_(2);r(3),y(e.error),r(2),S(" ",v(6,2,"errors.loading_error.action")," ")}}function Bn(a,t){if(a&1&&(o(0,"div",21),M(1,"app-streak-badge",22),s()),a&2){let e=_(3);r(),p("streakInfo",e.streakInfo)("loading",e.isLoading)("streakMode",e.displayPreferences.streakMode)("showLongestStreak",e.showLongestStreak)}}function Rn(a,t){if(a&1){let e=G();o(0,"app-goal-card",30),k("edit",function(i){P(e);let l=_(4);return D(l.onEditGoal(i))})("delete",function(i){P(e);let l=_(4);return D(l.onDeleteGoal(i))}),s()}if(a&2){let e=t.$implicit;p("progress",e)}}function Nn(a,t){if(a&1){let e=G();o(0,"div",23)(1,"div",24),w(2,Rn,1,1,"app-goal-card",25),o(3,"button",26),k("click",function(){P(e);let i=_(3);return D(i.openCreateGoalForm())}),V(),o(4,"svg",27),M(5,"path",28),s(),R(),o(6,"span",29),c(7),m(8,"translate"),s()()()()}if(a&2){let e=_(3);r(2),p("ngForOf",e.limitedGoalProgresses),r(5),y(v(8,2,"dashboard.goals.add"))}}function jn(a,t){if(a&1&&(ce(0),M(1,"app-stats-list",31),m(2,"translate"),de()),a&2){let e=t.$implicit,n=_(3);r(),p("title",v(2,6,e.group.nameKey))("stats",e.stats)("selectedPeriod",n.selectedPeriod)("groupColor",e.group.color)("groupIcon",e.group.icon)("visibleMetrics",e.group.visibleMetrics)}}function Wn(a,t){if(a&1&&(o(0,"div"),M(1,"app-performance-dashboard",15),w(2,Bn,2,4,"div",16)(3,Nn,9,4,"div",17),o(4,"div",18),w(5,jn,3,8,"ng-container",19),M(6,"app-modern-activity-chart",20)(7,"app-pace-scatter",15),s()()),a&2){let e=_(2);r(),p("activities",e.runningActivityData),r(),p("ngIf",e.displayPreferences.showStreaks),r(),p("ngIf",e.displayPreferences.showGoals&&!e.isLoading),r(2),p("ngForOf",e.groupedStatsData)("ngForTrackBy",e.trackByGroupId),r(),p("activities",e.allActivities)("period",e.selectedPeriod),r(),p("activities",e.allActivities)}}function $n(a,t){if(a&1&&(ce(0),w(1,zn,8,6,"div",11)(2,Ln,7,4,"div",11)(3,Wn,8,8,"div",3),de()),a&2){let e=_();r(),p("ngIf",e.authError),r(),p("ngIf",e.error&&!e.authError),r(),p("ngIf",!e.error&&!e.authError)}}function Hn(a,t){a&1&&(o(0,"div",32)(1,"div",33),V(),o(2,"svg",34),M(3,"path",35),s(),R(),o(4,"span"),c(5),m(6,"translate"),s()()()),a&2&&(r(5),y(v(6,1,"dashboard.dev_banner.title")))}function Kn(a,t){if(a&1){let e=G();o(0,"app-goal-form",36),k("save",function(i){P(e);let l=_();return D(l.onSaveGoal(i))})("cancel",function(){P(e);let i=_();return D(i.onCancelGoalForm())}),s()}if(a&2){let e=_();p("goal",e.editingGoal)("availableSports",e.availableSports)}}var Et=class a{constructor(t,e,n,i,l,d,u,g,h,b){this.stravaService=t;this.statsService=e;this.router=n;this.activityCache=i;this.sportConfigService=l;this.periodStateService=d;this.streakService=u;this.goalService=g;this.displayPreferencesService=h;this.translateService=b}destroy$=new tt;selectedPeriod="week";isLoading=!1;isInitialLoad=!0;error=null;authError=!1;groupedStatsData=[];runningActivityData=[];allActivities=[];streakInfo=null;goalProgresses=[];showGoalForm=!1;editingGoal=null;availableSports=[];displayPreferences={showStreaks:!0,showGoals:!0,streakMode:"weeks"};get showLongestStreak(){return this.selectedPeriod!=="week"}ngOnInit(){if(!this.checkAuth())return;this.displayPreferencesService.getPreferences().pipe(be(this.destroy$)).subscribe(e=>{let n=this.displayPreferences.streakMode!==e.streakMode;this.displayPreferences=e,n&&this.allActivities.length>0&&this.updateStreakInfo(this.allActivities)}),this.sportConfigService.config$.pipe(be(this.destroy$)).subscribe(()=>{this.allActivities.length>0&&this.updateActivitiesDisplay(this.allActivities)}),this.periodStateService.dashboardPeriod$.pipe(be(this.destroy$),nt()).subscribe(e=>{if(e!==this.selectedPeriod){let n=this.selectedPeriod;this.selectedPeriod=e;let i=e==="week"?"days":"weeks";i!==(n==="week"?"days":"weeks")&&this.displayPreferencesService.setStreakMode(i),this.allActivities.length>0&&this.loadData()}});let t=this.selectedPeriod==="week"?"days":"weeks";this.displayPreferences.streakMode!==t&&this.displayPreferencesService.setStreakMode(t),this.loadInitialData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPeriodChange(t){this.selectedPeriod=t,this.checkAuth()&&this.loadData()}reconnectToStrava(){localStorage.clear(),this.stravaService.authenticate()}loadInitialData(){if(this.isLoading=!0,this.isInitialLoad=!0,this.error=null,this.authError=!1,!this.activityCache.needsRefresh(this.selectedPeriod)){let t=this.activityCache.getFilteredActivities(this.selectedPeriod);this.updateActivitiesDisplay(t),this.isLoading=!1,this.isInitialLoad=!1;return}this.stravaService.loadAllRecentActivities().subscribe({next:t=>{let e=this.activityCache.getFilteredActivities(this.selectedPeriod);this.updateActivitiesDisplay(e),this.isLoading=!1,this.isInitialLoad=!1},error:t=>{console.error("Error loading activities:",t),this.isLoading=!1,this.isInitialLoad=!1,t.status===401?this.handleAuthError():(this.error=this.translateService.instant("errors.loading_error.title"),this.authError=!1)}})}loadData(){this.isLoading=!0,this.error=null,this.authError=!1,this.stravaService.getActivities(this.selectedPeriod).subscribe({next:t=>{this.updateActivitiesDisplay(t),this.isLoading=!1},error:t=>{console.error("Error loading activities:",t),this.isLoading=!1,t.status===401?this.handleAuthError():(this.error=this.translateService.instant("errors.loading_error.title"),this.authError=!1)}})}updateActivitiesDisplay(t){this.allActivities=t,this.updateStreakInfo(t),this.updateGoalProgresses(t),this.sportConfigService.detectAvailableTypes(t);let e=this.sportConfigService.getEnabledGroups();this.groupedStatsData=e.map(l=>{let d=this.sportConfigService.filterActivitiesByGroup(t,l);return{group:l,activities:d,stats:this.statsService.calculateStats(d)}});let n=this.sportConfigService.getConfig();for(let l of n.ungroupedSportsEnabled){let d=Te(l),u=t.filter(g=>(g.sport_type||g.type)===l);if(u.length>0){let h=this.sportConfigService.getUngroupedSportConfig(l)?.visibleMetrics||yt([l]),b={id:`individual-${l}`,nameKey:d.labelKey,types:[l],icon:d.icon,color:this.getColorForCategory(d.category),isDefault:!1,isEnabled:!0,order:999,visibleMetrics:h};this.groupedStatsData.push({group:b,activities:u,stats:this.statsService.calculateStats(u)})}}let i=e.find(l=>l.id==="running")||e.find(l=>l.types.some(d=>d.includes("Run")));i?this.runningActivityData=this.sportConfigService.filterActivitiesByGroup(t,i):this.runningActivityData=t.filter(l=>l.type.includes("Run"))}getColorForCategory(t){return{running:"#ef4444",cycling:"#3b82f6",walking:"#22c55e",fitness:"#8b5cf6",water:"#06b6d4",winter:"#64748b",other:"#f97316"}[t]||"#6b7280"}trackByGroupId(t,e){return e.group.id}checkAuth(){let t=localStorage.getItem("strava_token"),e=localStorage.getItem("strava_token_expires_at");return!t||!e||Date.now()/1e3>Number(e)?(this.handleAuthError(),!1):!0}handleAuthError(){this.authError=!0,this.error=null,this.isLoading=!1}updateStreakInfo(t){this.displayPreferences.streakMode==="weeks"?this.streakInfo=this.streakService.calculateWeekStreaks(t):this.streakInfo=this.streakService.calculateStreaks(t)}updateGoalProgresses(t){let e=this.goalService.getActiveGoals(),n=this.activityCache.getAllActivities();this.goalProgresses=e.map(i=>this.goalService.calculateProgress(i,n))}openCreateGoalForm(){this.editingGoal=null,this.updateAvailableSports(),this.showGoalForm=!0}onEditGoal(t){let e=this.goalService.getGoalById(t);e&&(this.editingGoal=e,this.updateAvailableSports(),this.showGoalForm=!0)}onSaveGoal(t){this.editingGoal?this.goalService.updateGoal(this.editingGoal.id,t):t.name&&t.type&&t.target&&t.period&&this.goalService.createGoal({name:t.name,type:t.type,target:t.target,period:t.period,sportTypes:t.sportTypes,startDate:t.startDate,endDate:t.endDate}),this.showGoalForm=!1,this.editingGoal=null,this.updateGoalProgresses(this.activityCache.getAllActivities())}onCancelGoalForm(){this.showGoalForm=!1,this.editingGoal=null}onDeleteGoal(t){this.goalService.deleteGoal(t),this.updateGoalProgresses(this.activityCache.getAllActivities())}updateAvailableSports(){let t=this.activityCache.getAllActivities(),e=new Set;t.forEach(n=>{e.add(n.sport_type||n.type)}),this.availableSports=Array.from(e).sort()}get limitedGoalProgresses(){return this.goalProgresses.slice(0,4)}static \u0275fac=function(e){return new(e||a)(I(Mt),I(Ot),I(st),I(St),I(bt),I(Ct),I(Xe),I(Ze),I(xt),I($))};static \u0275cmp=E({type:a,selectors:[["app-dashboard"]],standalone:!0,features:[A],decls:6,vars:5,consts:[[1,"dashboard-container"],["class","initial-load-container",4,"ngIf"],["class","spinner-overlay",4,"ngIf"],[4,"ngIf"],["class","dev-banner",4,"ngIf"],[3,"goal","availableSports","save","cancel",4,"ngIf"],[1,"initial-load-container"],[1,"initial-load-message"],[1,"initial-load-submessage"],[1,"spinner-overlay"],[1,"spinner-text"],["class","error-container",4,"ngIf"],[1,"error-container"],[1,"error-message"],[1,"retry-button",3,"click"],[3,"activities"],["class","streak-section",4,"ngIf"],["class","goals-section",4,"ngIf"],[1,"activity-type-container"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"activities","period"],[1,"streak-section"],[3,"streakInfo","loading","streakMode","showLongestStreak"],[1,"goals-section"],[1,"goals-grid"],[3,"progress","edit","delete",4,"ngFor","ngForOf"],[1,"add-goal-card",3,"click"],["viewBox","0 0 24 24","width","32","height","32",1,"add-icon"],["fill","currentColor","d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"],[1,"add-label"],[3,"edit","delete","progress"],[3,"title","stats","selectedPeriod","groupColor","groupIcon","visibleMetrics"],[1,"dev-banner"],[1,"dev-banner-content"],["viewBox","0 0 24 24","width","16","height","16",1,"dev-icon"],["fill","currentColor","d","M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm-1-5h2v2h-2zm0-8h2v6h-2z"],[3,"save","cancel","goal","availableSports"]],template:function(e,n){e&1&&(o(0,"div",0),w(1,Vn,9,6,"div",1)(2,Gn,5,3,"div",2)(3,$n,4,3,"ng-container",3)(4,Hn,7,3,"div",4)(5,Kn,1,2,"app-goal-form",5),s()),e&2&&(r(),p("ngIf",n.isInitialLoad),r(),p("ngIf",n.isLoading&&!n.isInitialLoad),r(),p("ngIf",!n.isLoading),r(),p("ngIf",!n.authError),r(),p("ngIf",n.showGoalForm))},dependencies:[F,Y,z,j,N,We,wt,He,Ke,Ye,Ue,Qe,qe],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;max-width:95%;margin:0 auto;min-height:100vh;position:relative}.dev-banner[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-secondary);padding:.5rem;margin-top:2rem;border-radius:var(--radius-sm);border:1px solid var(--gray-200);opacity:.7;transition:opacity .2s ease}.dev-banner[_ngcontent-%COMP%]:hover{opacity:1}.dev-banner-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;max-width:1200px;margin:0 auto;font-size:.75rem;line-height:1.3}.dev-icon[_ngcontent-%COMP%]{flex-shrink:0;opacity:.6}.streak-section[_ngcontent-%COMP%], .goals-section[_ngcontent-%COMP%]{margin:2rem 0}.add-goal-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:2px dashed var(--gray-300);border-radius:var(--radius-md);padding:2rem;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;transition:all .2s;min-height:200px;color:var(--text-secondary)}.add-goal-card[_ngcontent-%COMP%]:hover{border-color:var(--primary-500);background:var(--primary-50);transform:translateY(-2px);box-shadow:var(--shadow-md)}.add-goal-card[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{color:var(--primary-500);opacity:.8;transition:transform .2s}.add-goal-card[_ngcontent-%COMP%]:hover   .add-icon[_ngcontent-%COMP%]{transform:scale(1.1);opacity:1}.add-goal-card[_ngcontent-%COMP%]   .add-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--text-secondary)}.add-goal-card[_ngcontent-%COMP%]:hover   .add-label[_ngcontent-%COMP%]{color:var(--primary-600)}.goals-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}.activity-type-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3rem;grid-template-columns:1fr}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-100%);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:.6}50%{opacity:1}to{opacity:.6}}@media (max-width: 768px){.dev-banner[_ngcontent-%COMP%]{margin-top:1.5rem}.dev-banner-content[_ngcontent-%COMP%]{font-size:.7rem;gap:.375rem}}.error-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px;width:100%}.error-message[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--primary-200);border-radius:var(--radius-lg);padding:1.5rem;text-align:center;max-width:400px;width:90%;color:var(--text-primary);box-shadow:var(--shadow-sm)}.error-icon[_ngcontent-%COMP%]{font-size:24px;margin-bottom:10px}.retry-button[_ngcontent-%COMP%]{background-color:var(--primary-500);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:var(--radius-md);margin-top:1rem;font-size:.95rem;font-weight:500;cursor:pointer;transition:background-color .2s}.retry-button[_ngcontent-%COMP%]:hover{background-color:var(--primary-600)}@media (max-width: 1024px){.goals-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(260px,1fr))}}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:10px}.streak-section[_ngcontent-%COMP%], .goals-section[_ngcontent-%COMP%]{margin:1.5rem 0}.activity-type-container[_ngcontent-%COMP%], .goals-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.add-goal-card[_ngcontent-%COMP%]{min-height:auto;padding:1rem;flex-direction:row;justify-content:center;gap:.75rem}.add-goal-card[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{width:24px;height:24px}.add-goal-card[_ngcontent-%COMP%]   .add-label[_ngcontent-%COMP%]{font-size:.8125rem}}@media (max-width: 480px){.dashboard-container[_ngcontent-%COMP%]{padding:5px}h2[_ngcontent-%COMP%]{font-size:1.2rem}}.initial-load-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;gap:1.5rem}.initial-load-message[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.1rem;font-weight:500;text-align:center;padding:0 1rem;line-height:1.6}.initial-load-submessage[_ngcontent-%COMP%]{font-size:.9rem;font-weight:400;opacity:.7}.spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#fffc;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000}.spinner-text[_ngcontent-%COMP%]{margin-top:1rem;color:#2196f3;font-weight:500}@media (max-width: 768px){.spinner-text[_ngcontent-%COMP%]{font-size:.9rem}}"]})};export{Et as DashboardComponent};
